(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1085:(e,t,s)=>{"use strict";s.d(t,{Fm:()=>u,Qs:()=>p,cj:()=>r,h:()=>d,qp:()=>m});var n=s(5155);s(2115);var a=s(5452),l=s(4416),o=s(3999);function r(e){let{...t}=e;return(0,n.jsx)(a.bL,{"data-slot":"sheet",...t})}function i(e){let{...t}=e;return(0,n.jsx)(a.ZL,{"data-slot":"sheet-portal",...t})}function c(e){let{className:t,...s}=e;return(0,n.jsx)(a.hJ,{"data-slot":"sheet-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function d(e){let{className:t,children:s,side:r="right",...d}=e;return(0,n.jsxs)(i,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.UC,{"data-slot":"sheet-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...d,children:[s,(0,n.jsxs)(a.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(l.A,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,n.jsx)("div",{"data-slot":"sheet-header",className:(0,o.cn)("flex flex-col gap-1.5 p-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,n.jsx)(a.hE,{"data-slot":"sheet-title",className:(0,o.cn)("text-foreground font-semibold",t),...s})}function p(e){let{className:t,...s}=e;return(0,n.jsx)(a.VY,{"data-slot":"sheet-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...s})}},2815:(e,t,s)=>{Promise.resolve().then(s.bind(s,7406))},6037:(e,t,s)=>{"use strict";s.d(t,{W:()=>r,w:()=>o});var n=s(5155);s(2115);var a=s(7489),l=s(3999);function o(e){let{className:t,orientation:s="horizontal",decorative:o=!0,...r}=e;return(0,n.jsx)(a.b,{"data-slot":"separator",decorative:o,orientation:s,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}function r(e){let{className:t}=e;return(0,n.jsx)("div",{className:(0,l.cn)("border-border h-[1px] w-full border-t border-dashed bg-transparent",{["".concat(t)]:void 0!==t})})}},6705:(e,t,s)=>{"use strict";s.d(t,{WebSocketProvider:()=>c,h:()=>d});var n=s(5155),a=s(2115),l=s(9509);let o=(0,a.createContext)(null),r=null,i=null;function c(e){let{children:t,onMessage:s}=e,c=(0,a.useRef)(r),d=(0,a.useRef)(null),[u,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=l.env.NEXT_PUBLIC_BIFROST_PORT||"8080",t=()=>{var n;if((null==(n=c.current)?void 0:n.readyState)===WebSocket.OPEN)return;let a=new WebSocket("ws://localhost:".concat(e,"/ws/logs"));c.current=a,r=a,a.onopen=()=>{console.log("WebSocket connected"),m(!0),d.current&&(clearTimeout(d.current),d.current=null)},a.onmessage=e=>{try{let t=JSON.parse(e.data);"log"===t.type&&(i?i(t.payload):s&&s(t.payload))}catch(e){console.error("Failed to parse WebSocket message:",e)}},a.onclose=()=>{console.log("WebSocket disconnected, attempting to reconnect..."),m(!1),d.current=setTimeout(t,5e3)},a.onerror=e=>{m(!1),a.close()}};return t(),()=>{d.current&&(clearTimeout(d.current),d.current=null)}},[s]),(0,n.jsx)(o.Provider,{value:{isConnected:u,ws:c,setMessageHandler:e=>{i=e}},children:t})}function d(){let e=(0,a.useContext)(o);if(!e)throw Error("useWebSocket must be used within a WebSocketProvider");return e}},7406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ey});var n=s(5155),a=s(2115),l=s(6268),o=s(1032),r=s(8524),i=s(7168),c=s(3904),d=s(4416),u=s(2355),m=s(3052),p=s(9852),h=s(7924),x=s(5196),g=s(7740),f=s(3999);function j(e){let{className:t,...s}=e;return(0,n.jsx)(g.uB,{"data-slot":"command",className:(0,f.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...s})}function v(e){let{className:t,...s}=e;return(0,n.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,n.jsx)(h.A,{className:"size-4 shrink-0 opacity-50"}),(0,n.jsx)(g.uB.Input,{"data-slot":"command-input",className:(0,f.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})}function y(e){let{className:t,...s}=e;return(0,n.jsx)(g.uB.List,{"data-slot":"command-list",className:(0,f.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...s})}function N(e){let{...t}=e;return(0,n.jsx)(g.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function b(e){let{className:t,...s}=e;return(0,n.jsx)(g.uB.Group,{"data-slot":"command-group",className:(0,f.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...s})}function w(e){let{className:t,...s}=e;return(0,n.jsx)(g.uB.Item,{"data-slot":"command-item",className:(0,f.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}s(9840);var k=s(547);function _(e){let{...t}=e;return(0,n.jsx)(k.bL,{"data-slot":"popover",...t})}function S(e){let{...t}=e;return(0,n.jsx)(k.l9,{"data-slot":"popover-trigger",...t})}function A(e){let{className:t,align:s="center",sideOffset:a=4,...l}=e;return(0,n.jsx)(k.ZL,{children:(0,n.jsx)(k.UC,{"data-slot":"popover-content",align:s,sideOffset:a,className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}var C=s(7783);let H={Status:C.f,Providers:C.xq,Type:C.mG};function L(e){let{filters:t,onFiltersChange:s}=e,[l,o]=(0,a.useState)(!1),[r,c]=(0,a.useState)(t.content_search||""),d=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let u=(0,a.useCallback)(e=>{c(e),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{s({...t,content_search:e})},500)},[t,s]),m=(e,n)=>{let a={Status:"status",Providers:"providers",Type:"objects"}[e],l=t[a]||[],o=l.includes(n)?l.filter(e=>e!==n):[...l,n];s({...t,[a]:o})},g=(e,s)=>{let n=t[({Status:"status",Providers:"providers",Type:"objects"})[e]];return Array.isArray(n)&&n.includes(s)},k=()=>Object.entries(t).reduce((e,t)=>{let[s,n]=t;return Array.isArray(n)?e+n.length:e+ +!!n},0);return(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,n.jsx)(h.A,{className:"size-5"}),(0,n.jsx)(p.p,{type:"text",className:"border-none shadow-none outline-none focus-visible:ring-0",placeholder:"Search logs",value:r,onChange:e=>u(e.target.value)})]}),(0,n.jsxs)(_,{open:l,onOpenChange:o,children:[(0,n.jsx)(S,{asChild:!0,children:(0,n.jsxs)(i.$,{variant:"outline",size:"sm",className:"h-9",children:["Filters",k()>0&&(0,n.jsx)("span",{className:"bg-primary/10 flex h-6 w-6 items-center justify-center rounded-full text-xs font-normal",children:k()})]})}),(0,n.jsx)(A,{className:"w-[200px] p-0",align:"end",children:(0,n.jsxs)(j,{children:[(0,n.jsx)(v,{placeholder:"Search filters..."}),(0,n.jsxs)(y,{children:[(0,n.jsx)(N,{children:"No filters found."}),Object.entries(H).map(e=>{let[t,s]=e;return(0,n.jsx)(b,{heading:t,children:s.map(e=>{let s=g(t,e);return(0,n.jsxs)(w,{onSelect:()=>m(t,e),children:[(0,n.jsx)("div",{className:(0,f.cn)("border-primary mr-2 flex h-4 w-4 items-center justify-center rounded-sm border",s?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,n.jsx)(x.A,{className:"text-primary-foreground size-3"})}),(0,n.jsx)("span",{children:e})]},e)})},t)})]})]})})]})]})}function z(e){let{columns:t,data:s,totalItems:p,loading:h=!1,filters:x,pagination:g,onFiltersChange:f,onPaginationChange:j,onRowClick:v,isSocketConnected:y}=e,[N,b]=(0,a.useState)([{id:g.sort_by,desc:"desc"===g.order}]),w=(0,l.N4)({data:s,columns:t,getCoreRowModel:(0,o.HT)(),manualPagination:!0,manualSorting:!0,manualFiltering:!0,pageCount:Math.ceil(p/g.limit),state:{sorting:N},onSortingChange:e=>{let t="function"==typeof e?e(N):e;if(b(t),t.length>0){let{id:e,desc:s}=t[0];j({...g,sort_by:e,order:s?"desc":"asc"})}}}),k=Math.floor(g.offset/g.limit)+1,_=Math.ceil(p/g.limit),S=g.offset+1,A=Math.min(g.offset+g.limit,p),C=e=>{let t=(e-1)*g.limit;j({...g,offset:t})};return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(L,{filters:x,onFiltersChange:f}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(r.XI,{children:[(0,n.jsx)(r.A0,{children:w.getHeaderGroups().map(e=>(0,n.jsx)(r.Hj,{children:e.headers.map(e=>(0,n.jsx)(r.nd,{children:e.isPlaceholder?null:(0,l.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(r.BF,{children:h?(0,n.jsx)(r.Hj,{children:(0,n.jsx)(r.nA,{colSpan:t.length,className:"h-24 text-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(c.A,{className:"h-4 w-4 animate-spin"}),"Loading logs..."]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Hj,{className:"hover:bg-transparent",children:(0,n.jsx)(r.nA,{colSpan:t.length,className:"h-12 text-center",children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-2",children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{className:"h-4 w-4 animate-spin"}),"Listening for logs..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{className:"h-4 w-4"}),"Not connected to socket, please refresh the page."]})})})}),w.getRowModel().rows.length?w.getRowModel().rows.map(e=>(0,n.jsx)(r.Hj,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>null==v?void 0:v(e.original),children:e.getVisibleCells().map(e=>(0,n.jsx)(r.nA,{children:(0,l.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(r.Hj,{children:(0,n.jsx)(r.nA,{colSpan:t.length,className:"h-24 text-center",children:"No results found."})})]})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,n.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[S.toLocaleString(),"-",A.toLocaleString()," of ",p.toLocaleString()," entries"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>C(k-1),disabled:1===k,children:(0,n.jsx)(u.A,{className:"size-3"})}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Page"}),(0,n.jsx)("span",{children:k}),(0,n.jsxs)("span",{children:["of ",_]})]}),(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>C(k+1),disabled:k===_,children:(0,n.jsx)(m.A,{className:"size-3"})})]})]})]})}var T=s(8145),B=s(1085),M=s(6561),I=s(7434),O=s(5868);function E(e){if(null===e.value)return null;let t=e.orientation||"vertical";return(0,n.jsx)("div",{className:(0,f.cn)("items-top flex flex-col gap-2",{["".concat(e.className)]:void 0!==e.className,"items-start":"left"===e.align||void 0===e.align,"items-end":"right"===e.align}),children:(0,n.jsxs)("div",{className:e.containerClassName,children:[""!==e.label&&(0,n.jsx)("div",{className:"text-muted-foreground flex shrink-0 flex-row items-center gap-2 text-xs font-medium",children:e.label.toUpperCase()}),(0,n.jsx)("div",{className:(0,f.cn)("text-md flex text-xs font-medium whitespace-nowrap transition-transform delay-75",{"w-full flex-col items-center gap-2":"horizontal"===t,"flex-row items-start gap-2":"vertical"===t,["".concat(e.valueClassName)]:void 0!==e.valueClassName,"text-end":"right"===e.align}),children:e.value})]})})}var R=s(2940),q=s.n(R),P=s(6037),W=s(1154),F=s(1362);let D=(0,s(5028).default)(()=>s.e(364).then(s.bind(s,1364)).then(e=>e.default),{loadableGenerated:{webpack:()=>[1364]},ssr:!1,loading:()=>(0,n.jsx)(W.A,{className:"h-4 w-4 animate-spin p-4"})});function K(e){var t,s,l,o,r,i,c,d,u,m,p,h,x,g,j,v;let{className:y,lang:N,code:b,onChange:w,height:k,minHeight:_}=e,S=(0,a.useRef)(null),[A,C]=(0,a.useState)(!1),[H,L]=(0,a.useState)(e.height||e.minHeight||200);(0,a.useEffect)(()=>{C(!0)},[]);let{theme:z,systemTheme:T}=(0,F.D)(),B={lineNumbers:(null==(t=e.options)?void 0:t.lineNumbers)||"off",readOnly:e.readonly,scrollBeyondLastLine:null!=(p=null==(s=e.options)?void 0:s.scrollBeyondLastLine)&&p,minimap:{enabled:!1},contextmenu:!1,fontFamily:"var(--font-geist-mono)",fontSize:e.fontSize||12.5,padding:{top:2,bottom:2},wordWrap:e.wrap?"on":"off",folding:null!=(h=null==(l=e.options)?void 0:l.collapsibleBlocks)&&h,glyphMargin:!1,lineNumbersMinChars:null!=(x=null==(o=e.options)?void 0:o.lineNumbersMinChars)?x:4,overviewRulerLanes:null!=(g=null==(r=e.options)?void 0:r.overviewRulerLanes)?g:0,renderLineHighlight:"none",cursorStyle:"line",cursorBlinking:"smooth",scrollbar:{vertical:(null==(i=e.options)?void 0:i.showVerticalScrollbar)?"auto":"hidden",horizontal:(null==(c=e.options)?void 0:c.showHorizontalScrollbar)?"auto":"hidden",alwaysConsumeMouseWheel:null!=(j=null==(d=e.options)?void 0:d.alwaysConsumeMouseWheel)&&j},guides:{indentation:null==(v=null==(u=e.options)?void 0:u.showIndentLines)||v},hover:{enabled:!(null==(m=e.options)?void 0:m.disableHover)},wordBasedSuggestions:"off",...e.options};return A?(0,n.jsx)("div",{id:e.id,ref:S,className:(0,f.cn)("group relative h-full w-full",e.containerClassName),onBlur:e.onBlur,children:(0,n.jsx)(D,{height:H,width:e.width,language:N||"javascript",value:b||"",theme:"dark"===z||"system"===z&&"dark"===T?"custom-dark":"light",options:B,loading:(0,n.jsx)(W.A,{className:"h-4 w-4 animate-spin"}),onChange:e=>{w&&w(e||"")},onMount:(t,s)=>{if(e.autoFocus&&t.focus(),e.shouldAdjustInitialHeight||e.autoResize){let s=()=>{try{let s=t.getContentHeight();e.minHeight&&s<e.minHeight&&(s=e.minHeight),e.maxHeight&&s>e.maxHeight&&(s=e.maxHeight),L(s+15),t.layout()}catch(e){console.warn("Error updating editor height:",e)}};if(setTimeout(s,100),e.autoResize){let e=t.getModel();e&&e.onDidChangeContent(()=>{requestAnimationFrame(s)})}}if(e.autoFormat)try{var n;null==(n=t.getAction("editor.action.formatDocument"))||n.run()}catch(e){console.warn("Auto-format failed:",e)}},className:(0,f.cn)("code text-md w-full bg-transparent ring-offset-transparent outline-none",y),beforeMount:e=>{window.MonacoEnvironment={getWorker:()=>({postMessage:()=>{},terminate:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1,onerror:null,onmessage:null,onmessageerror:null})},e.editor.defineTheme("custom-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#00000000",focusBorder:"#00000000","editor.lineHighlightBorder":"#00000000","editor.selectionHighlightBorder":"#00000000","editorWidget.border":"#00000000","editorOverviewRuler.border":"#00000000"}})}})}):(0,n.jsx)("div",{className:(0,f.cn)("group relative flex h-24 w-full items-center justify-center",e.containerClassName),children:(0,n.jsx)(W.A,{className:"h-4 w-4 animate-spin"})})}let G=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},U=e=>{try{return JSON.parse(e)}catch(t){return e}};function J(e){let{message:t}=e;return(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium capitalize",children:t.role}),"string"==typeof t.content&&t.content.length>0&&!G(t.content)?(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:t.content}):t.content.length>0&&(0,n.jsx)(K,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:250,wrap:!0,code:JSON.stringify(U(t.content),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}}),t.tool_calls&&t.tool_calls.length>0&&(0,n.jsx)("div",{className:"border-b last:border-b-0",children:(0,n.jsx)(K,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:150,wrap:!0,code:JSON.stringify(U(t.tool_calls),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})})]})}function Y(e){var t,s,a,l,o,r,i,c;let{log:d,open:u,onOpenChange:m}=e;if(!d)return null;d.latency;let p=d.token_usage;p&&(p.completion_tokens,p.total_tokens),p&&(p.prompt_tokens,p.completion_tokens,p.prompt_tokens,p.completion_tokens);let h=null;if(null==(t=d.params)?void 0:t.tools)try{h=JSON.stringify(d.params.tools,null,2)}catch(e){}let x=null;if(null==(s=d.params)?void 0:s.tool_choice)try{x=JSON.stringify(d.params.tool_choice,null,2)}catch(e){}return(0,n.jsx)(B.cj,{open:u,onOpenChange:m,children:(0,n.jsxs)(B.h,{className:"flex w-full flex-col overflow-x-hidden p-8 sm:max-w-2xl",children:[(0,n.jsx)(B.Fm,{className:"px-0",children:(0,n.jsxs)(B.qp,{className:"flex w-fit items-center gap-2 font-medium",children:["success"===d.status&&(0,n.jsxs)("p",{className:"text-md max-w-full truncate",children:["Request ID: ",d.id]}),(0,n.jsx)(T.E,{variant:"outline",className:C.Ez[d.status],children:d.status})]})}),(0,n.jsxs)("div",{className:"space-y-4 rounded-sm border px-6 py-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(X,{title:"Timings",icon:(0,n.jsx)(M.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(E,{className:"w-full",label:"Start Timestamp",value:q()(d.timestamp).format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(E,{className:"w-full",label:"End Timestamp",value:q()(d.timestamp).add(d.latency||0,"ms").format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(E,{className:"w-full",label:"Latency",value:isNaN(d.latency||0)?"NA":(0,n.jsxs)("div",{children:[null==(a=d.latency||0)?void 0:a.toFixed(2),"ms"]})})]})]}),(0,n.jsx)(P.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(X,{title:"Request Details",icon:(0,n.jsx)(I.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(E,{className:"w-full",label:"Provider",value:C.oU[d.provider]}),(0,n.jsx)(E,{className:"w-full",label:"Model",value:d.model}),(0,n.jsx)(E,{className:"w-full",label:"Type",value:(0,n.jsx)("div",{className:"".concat(C.wf[d.object]," rounded-md px-3 py-1"),children:C.tJ[d.object]})}),d.params&&Object.keys(d.params).length>0&&Object.entries(d.params).filter(e=>{let[t]=e;return"tools"!==t}).filter(e=>{let[t,s]=e;return"boolean"==typeof s||"number"==typeof s||"string"==typeof s}).map(e=>{let[t,s]=e;return(0,n.jsx)(E,{className:"w-full",label:t,value:s},t)})]})]}),"success"===d.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(X,{title:"Tokens",icon:(0,n.jsx)(O.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(E,{className:"w-full",label:"Prompt Tokens",value:null==(l=d.token_usage)?void 0:l.prompt_tokens}),(0,n.jsx)(E,{className:"w-full",label:"Completion Tokens",value:null==(o=d.token_usage)?void 0:o.completion_tokens}),(0,n.jsx)(E,{className:"w-full",label:"Total Tokens",value:null==(r=d.token_usage)?void 0:r.total_tokens})]})]})]})]}),x&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tool Choice"}),(0,n.jsx)(K,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:x,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),h&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tools"}),(0,n.jsx)(K,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:h,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Conversation History"}),d.input_history&&d.input_history.map(e=>(0,n.jsx)(J,{message:e},e.content.toString())),(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Response"}),"success"===d.status?d.output_message&&(0,n.jsx)(J,{message:d.output_message}):(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Error"}),(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:null==(i=d.error_details)?void 0:i.error.message})]})]})})}let X=e=>{let{title:t,icon:s}=e;return(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"text-sm font-medium",children:t})})};var $=s(1492),V=s(4432);let Z=()=>[{accessorKey:"timestamp",header:e=>{let{column:t}=e;return(0,n.jsxs)(i.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Time",(0,n.jsx)($.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.timestamp;return(0,n.jsx)("div",{className:"font-mono text-sm",children:new Date(s).toLocaleString()})}},{accessorKey:"provider",header:"Provider",cell:e=>{let{row:t}=e,s=t.original.provider;return(0,n.jsxs)(T.E,{variant:"secondary",className:"uppercase",children:[(0,V.FO)(s,{size:"sm"}),s]})}},{accessorKey:"model",header:"Model",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"max-w-[240px] truncate text-sm font-medium",children:t.original.model})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,s=t.original.status;return(0,n.jsx)(T.E,{variant:"secondary",className:C.Ez[s],children:s})}},{accessorKey:"latency",header:e=>{let{column:t}=e;return(0,n.jsxs)(i.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Latency",(0,n.jsx)($.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.latency;return(0,n.jsx)("div",{className:"font-mono text-sm",children:s?"".concat(s.toLocaleString(),"ms"):"N/A"})}},{accessorKey:"token_usage.total_tokens",header:e=>{let{column:t}=e;return(0,n.jsxs)(i.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Tokens",(0,n.jsx)($.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.token_usage;return s?(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono",children:s.total_tokens.toLocaleString()}),(0,n.jsxs)("div",{className:"text-muted-foreground text-xs",children:[s.prompt_tokens,"+",s.completion_tokens]})]}):(0,n.jsx)("div",{className:"font-mono text-sm",children:"N/A"})}},{id:"request_type",header:"Type",cell:e=>{let{row:t}=e;return(0,n.jsx)(T.E,{variant:"outline",className:"".concat(C.wf[t.original.object]," text-xs"),children:C.tJ[t.original.object]})}}];var Q=s(1886),ee=s(8482),et=s(9026),es=s(741),en=s(646),ea=s(4186),el=s(5448),eo=s(5339),er=s(6705),ei=s(4964),ec=s(4357),ed=s(1243),eu=s(2138),em=s(6671),ep=s(5784);let eh={curl:'curl -X POST http://localhost:8080/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "openai/gpt-4o-mini",\n    "messages": [\n      {"role": "user", "content": "Hello!"}\n    ]\n  }\'',sdk:{openai:{python:'import openai\n\nclient = openai.OpenAI(\n    base_url="http://localhost:8080/openai",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-4o-mini",\n    messages=[{"role": "user", "content": "Hello!"}]\n)',typescript:'import OpenAI from "openai";\n\nconst openai = new OpenAI({\n  baseURL: "http://localhost:8080/openai",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await openai.chat.completions.create({\n  model: "gpt-4o-mini",\n  messages: [{ role: "user", content: "Hello!" }],\n});'},anthropic:{python:'import anthropic\n\nclient = anthropic.Anthropic(\n    base_url="http://localhost:8080/anthropic",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.messages.create(\n    model="claude-3-sonnet-20240229",\n    max_tokens=1000,\n    messages=[{"role": "user", "content": "Hello!"}]\n)',typescript:'import Anthropic from "@anthropic-ai/sdk";\n\nconst anthropic = new Anthropic({\n  baseURL: "http://localhost:8080/anthropic",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await anthropic.messages.create({\n  model: "claude-3-sonnet-20240229",\n  max_tokens: 1000,\n  messages: [{ role: "user", content: "Hello!" }],\n});'},genai:{python:'from google import genai\nfrom google.genai.types import HttpOptions\n\nclient = genai.Client(\n    api_key="dummy-api-key", # Handled by Bifrost\n    http_options=HttpOptions(base_url="http://localhost:8080/genai")\n)\n\nresponse = client.models.generate_content(\n    model="gemini-pro",\n    contents="Hello!"\n)',typescript:'import { GoogleGenerativeAI } from "@google/generative-ai";\n\nconst genAI = new GoogleGenerativeAI("dummy-api-key", { // Handled by Bifrost\n  baseUrl: "http://localhost:8080/genai",\n});\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst response = await model.generateContent("Hello!");'}}},ex={scrollBeyondLastLine:!1,minimap:{enabled:!1},lineNumbers:"off",folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,glyphMargin:!1};function eg(e){let{code:t,language:s,onLanguageChange:a,showLanguageSelect:l=!1,readonly:o=!0}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-2",children:[l&&a&&(0,n.jsxs)(ep.l6,{value:s,onValueChange:a,children:[(0,n.jsx)(ep.bq,{className:"h-8 w-fit text-xs",children:(0,n.jsx)(ep.yv,{})}),(0,n.jsxs)(ep.gC,{children:[(0,n.jsx)(ep.eb,{className:"text-xs",value:"python",children:"Python"}),(0,n.jsx)(ep.eb,{className:"text-xs",value:"typescript",children:"TypeScript"})]})]}),(0,n.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(t),em.o.success("Copied to clipboard")},children:(0,n.jsx)(ec.A,{className:"size-4"})})]}),(0,n.jsx)(K,{className:"w-full",code:t,lang:s,readonly:o,height:300,fontSize:14,options:ex})]})}let ef=[{title:"What You'll See Here",description:"Real-time request logs from all your API calls",features:["Real-time request logs from all your API calls","Comprehensive request and error details","Token usage, latency, and cost metrics","Advanced filtering and search capabilities"]},{title:"Getting Started",description:"Use the examples below to get started",features:["Choose an example from below","Set Bifrost as your API endpoint","Send a test request","Monitor the response in real-time"]}];function ej(e){let{isSocketConnected:t,error:s}=e,[l,o]=(0,a.useState)("python");return(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-2 text-center",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold",children:"Welcome to Request Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground text-lg",children:"Monitor and analyze all your API requests in real-time"})]}),t&&(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm",children:[(0,n.jsx)(c.A,{className:"h-4 w-4 animate-spin"}),(0,n.jsx)("span",{children:"Listening for logs..."})]}),s&&(0,n.jsxs)(et.Fc,{children:[(0,n.jsx)(ed.A,{className:"h-4 w-4"}),(0,n.jsx)(et.TN,{children:s})]}),(0,n.jsx)("div",{className:"grid w-full grid-cols-1 gap-6 md:grid-cols-2",children:ef.map(e=>(0,n.jsxs)(ee.Zp,{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,n.jsx)("p",{className:"text-muted-foreground",children:e.description}),(0,n.jsx)("ul",{className:"text-muted-foreground space-y-3",children:e.features.map(e=>(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)(eu.A,{className:"mt-0.5 h-5 w-5 shrink-0"}),(0,n.jsx)("span",{children:e})]},e))})]},e.title))}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:"Integration Examples"}),(0,n.jsxs)(ei.tU,{defaultValue:"curl",className:"w-full",children:[(0,n.jsxs)(ei.j7,{className:"h-10 w-full justify-start",children:[(0,n.jsx)(ei.Xi,{value:"curl",children:"cURL"}),(0,n.jsx)(ei.Xi,{value:"openai",children:"OpenAI SDK"}),(0,n.jsx)(ei.Xi,{value:"anthropic",children:"Anthropic SDK"}),(0,n.jsx)(ei.Xi,{value:"genai",children:"Google GenAI SDK"})]}),(0,n.jsx)(ei.av,{value:"curl",className:"p-4",children:(0,n.jsx)(eg,{code:eh.curl,language:"bash",readonly:!1})}),Object.keys(eh.sdk).map(e=>(0,n.jsx)(ei.av,{value:e,className:"space-y-4 p-4",children:(0,n.jsx)(eg,{code:eh.sdk[e][l],language:"typescript"===l?"typescript":"python",onLanguageChange:e=>o(e),showLanguageSelect:!0})},e))]})]})]})}var ev=s(2384);function ey(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(0),[o,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[h,x]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[j,v]=(0,a.useState)({providers:[],models:[],status:[],content_search:""}),[y,N]=(0,a.useState)({limit:50,offset:0,sort_by:"timestamp",order:"desc"}),b=(0,a.useCallback)(e=>{h&&x(!1),0===y.offset&&"timestamp"===y.sort_by&&"desc"===y.order&&(t(t=>{if(!A(e,j))return t;let s=[e,...t];return s.length>y.limit&&s.pop(),s}),l(e=>e+1),r(t=>{if(!t)return t;let s={...t};s.total_requests+=1;let n=t.success_rate/100*t.total_requests;return s.success_rate=("success"===e.status?n+1:n)/s.total_requests*100,e.latency&&(s.average_latency=(t.average_latency*t.total_requests+e.latency)/s.total_requests),e.token_usage&&(s.total_tokens+=e.token_usage.total_tokens),s}))},[y.offset,y.sort_by,y.order,y.limit,j,h]),{isConnected:w,setMessageHandler:k}=(0,er.h)();(0,a.useEffect)(()=>{k(b)},[b,k]);let _=(0,a.useCallback)(async()=>{u(!0),p(null);try{let[e,s]=await Q.K.getLogs(j,y);s?(p(s),t([]),l(0)):e&&(t(e.logs||[]),l(e.stats.total_requests),r(e.stats)),i&&x(!e||0===e.stats.total_requests)}catch(e){p("Cannot fetch logs. Please check if logs are enabled in your Bifrost config."),t([]),l(0),x(!0)}finally{u(!1)}},[j,y,i]);(0,a.useEffect)(()=>{i||_()},[_,i]),(0,a.useEffect)(()=>{_(),c(!1)},[]);let S=e=>"string"==typeof e?e:Array.isArray(e)?e.reduce((e,t)=>"text"===t.type&&t.text?e+t.text:e,""):"",A=(e,t)=>{var s,n,a;if((null==(s=t.providers)?void 0:s.length)&&!t.providers.includes(e.provider)||(null==(n=t.models)?void 0:n.length)&&!t.models.includes(e.model)||(null==(a=t.status)?void 0:a.length)&&!t.status.includes(e.status)||t.start_time&&new Date(e.timestamp)<new Date(t.start_time)||t.end_time&&new Date(e.timestamp)>new Date(t.end_time)||t.min_latency&&(!e.latency||e.latency<t.min_latency)||t.max_latency&&(!e.latency||e.latency>t.max_latency)||t.min_tokens&&(!e.token_usage||e.token_usage.total_tokens<t.min_tokens)||t.max_tokens&&(!e.token_usage||e.token_usage.total_tokens>t.max_tokens))return!1;if(t.content_search){let s=t.content_search.toLowerCase();if(![...(e.input_history||[]).map(e=>S(e.content)),e.output_message?S(e.output_message.content):""].join(" ").toLowerCase().includes(s))return!1}return!0},C=(0,a.useMemo)(()=>[{title:"Total Requests",value:(null==o?void 0:o.total_requests.toLocaleString())||"-",icon:(0,n.jsx)(es.A,{className:"size-4"})},{title:"Success Rate",value:o?"".concat(o.success_rate.toFixed(2),"%"):"-",icon:(0,n.jsx)(en.A,{className:"size-4"})},{title:"Avg Latency",value:o?"".concat(o.average_latency.toFixed(2),"ms"):"-",icon:(0,n.jsx)(ea.A,{className:"size-4"})},{title:"Total Tokens",value:(null==o?void 0:o.total_tokens.toLocaleString())||"-",icon:(0,n.jsx)(el.A,{className:"size-4"})}],[o]),H=Z();return(0,n.jsx)("div",{className:"bg-background",children:i?(0,n.jsx)(ev.A,{}):h?(0,n.jsx)(ej,{isSocketConnected:w,error:m}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Request Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Monitor and analyze all API requests and responses"})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:C.map(e=>(0,n.jsx)(ee.Zp,{className:"py-4",children:(0,n.jsx)(ee.Wu,{className:"flex items-center justify-between px-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-muted-foreground text-xs",children:e.title}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.value})]})})},e.title))}),m&&(0,n.jsxs)(et.Fc,{variant:"destructive",children:[(0,n.jsx)(eo.A,{className:"h-4 w-4"}),(0,n.jsx)(et.TN,{children:m})]}),(0,n.jsx)(z,{columns:H,data:e,totalItems:s,loading:d,filters:j,pagination:y,onFiltersChange:v,onPaginationChange:N,onRowClick:f,isSocketConnected:w})]}),(0,n.jsx)(Y,{log:g,open:null!==g,onOpenChange:e=>!e&&f(null)})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,146,617,452,272,0,441,684,358],()=>t(2815)),_N_E=e.O()}]);