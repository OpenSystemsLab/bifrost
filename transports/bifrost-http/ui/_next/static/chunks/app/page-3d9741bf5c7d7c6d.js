(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1085:(e,t,s)=>{"use strict";s.d(t,{Fm:()=>u,Qs:()=>p,cj:()=>r,h:()=>d,qp:()=>m});var n=s(5155);s(2115);var a=s(5452),l=s(4416),o=s(3999);function r(e){let{...t}=e;return(0,n.jsx)(a.bL,{"data-slot":"sheet",...t})}function i(e){let{...t}=e;return(0,n.jsx)(a.ZL,{"data-slot":"sheet-portal",...t})}function c(e){let{className:t,...s}=e;return(0,n.jsx)(a.hJ,{"data-slot":"sheet-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function d(e){let{className:t,children:s,side:r="right",...d}=e;return(0,n.jsxs)(i,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.UC,{"data-slot":"sheet-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...d,children:[s,(0,n.jsxs)(a.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(l.A,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,n.jsx)("div",{"data-slot":"sheet-header",className:(0,o.cn)("flex flex-col gap-1.5 p-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,n.jsx)(a.hE,{"data-slot":"sheet-title",className:(0,o.cn)("text-foreground font-semibold",t),...s})}function p(e){let{className:t,...s}=e;return(0,n.jsx)(a.VY,{"data-slot":"sheet-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...s})}},5196:(e,t,s)=>{Promise.resolve().then(s.bind(s,6794))},6794:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ev});var n=s(5155),a=s(2115),l=s(9464),o=s(6268),r=s(1032),i=s(8524),c=s(7168),d=s(3904),u=s(4416),m=s(2355),p=s(3052),h=s(9852),x=s(7924),g=s(2815),f=s(7740),j=s(3999);function v(e){let{className:t,...s}=e;return(0,n.jsx)(f.uB,{"data-slot":"command",className:(0,j.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...s})}function y(e){let{className:t,...s}=e;return(0,n.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,n.jsx)(x.A,{className:"size-4 shrink-0 opacity-50"}),(0,n.jsx)(f.uB.Input,{"data-slot":"command-input",className:(0,j.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})}function N(e){let{className:t,...s}=e;return(0,n.jsx)(f.uB.List,{"data-slot":"command-list",className:(0,j.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...s})}function b(e){let{...t}=e;return(0,n.jsx)(f.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function w(e){let{className:t,...s}=e;return(0,n.jsx)(f.uB.Group,{"data-slot":"command-group",className:(0,j.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...s})}function _(e){let{className:t,...s}=e;return(0,n.jsx)(f.uB.Item,{"data-slot":"command-item",className:(0,j.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}s(9840);var k=s(547);function S(e){let{...t}=e;return(0,n.jsx)(k.bL,{"data-slot":"popover",...t})}function A(e){let{...t}=e;return(0,n.jsx)(k.l9,{"data-slot":"popover-trigger",...t})}function C(e){let{className:t,align:s="center",sideOffset:a=4,...l}=e;return(0,n.jsx)(k.ZL,{children:(0,n.jsx)(k.UC,{"data-slot":"popover-content",align:s,sideOffset:a,className:(0,j.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}var L=s(7783);let H={Status:L.f,Providers:L.xq,Type:L.mG};function T(e){let{filters:t,onFiltersChange:s}=e,[l,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)(t.content_search||""),d=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let u=(0,a.useCallback)(e=>{i(e),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{s({...t,content_search:e})},500)},[t,s]),m=(e,n)=>{let a={Status:"status",Providers:"providers",Type:"objects"}[e],l=t[a]||[],o=l.includes(n)?l.filter(e=>e!==n):[...l,n];s({...t,[a]:o})},p=(e,s)=>{let n=t[({Status:"status",Providers:"providers",Type:"objects"})[e]];return Array.isArray(n)&&n.includes(s)},f=()=>Object.entries(t).reduce((e,t)=>{let[s,n]=t;return Array.isArray(n)?e+n.length:e+ +!!n},0);return(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,n.jsx)(x.A,{className:"size-5"}),(0,n.jsx)(h.p,{type:"text",className:"border-none shadow-none outline-none focus-visible:ring-0",placeholder:"Search logs",value:r,onChange:e=>u(e.target.value)})]}),(0,n.jsxs)(S,{open:l,onOpenChange:o,children:[(0,n.jsx)(A,{asChild:!0,children:(0,n.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9",children:["Filters",f()>0&&(0,n.jsx)("span",{className:"bg-primary/10 flex h-6 w-6 items-center justify-center rounded-full text-xs font-normal",children:f()})]})}),(0,n.jsx)(C,{className:"w-[200px] p-0",align:"end",children:(0,n.jsxs)(v,{children:[(0,n.jsx)(y,{placeholder:"Search filters..."}),(0,n.jsxs)(N,{children:[(0,n.jsx)(b,{children:"No filters found."}),Object.entries(H).map(e=>{let[t,s]=e;return(0,n.jsx)(w,{heading:t,children:s.map(e=>{let s=p(t,e);return(0,n.jsxs)(_,{onSelect:()=>m(t,e),children:[(0,n.jsx)("div",{className:(0,j.cn)("border-primary mr-2 flex h-4 w-4 items-center justify-center rounded-sm border",s?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,n.jsx)(g.A,{className:"text-primary-foreground size-3"})}),(0,n.jsx)("span",{children:e})]},e)})},t)})]})]})})]})]})}function z(e){let{columns:t,data:s,totalItems:l,loading:h=!1,filters:x,pagination:g,onFiltersChange:f,onPaginationChange:j,onRowClick:v,isSocketConnected:y}=e,[N,b]=(0,a.useState)([{id:g.sort_by,desc:"desc"===g.order}]),w=(0,o.N4)({data:s,columns:t,getCoreRowModel:(0,r.HT)(),manualPagination:!0,manualSorting:!0,manualFiltering:!0,pageCount:Math.ceil(l/g.limit),state:{sorting:N},onSortingChange:e=>{let t="function"==typeof e?e(N):e;if(b(t),t.length>0){let{id:e,desc:s}=t[0];j({...g,sort_by:e,order:s?"desc":"asc"})}}}),_=Math.floor(g.offset/g.limit)+1,k=Math.ceil(l/g.limit),S=g.offset+1,A=Math.min(g.offset+g.limit,l),C=e=>{let t=(e-1)*g.limit;j({...g,offset:t})};return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(T,{filters:x,onFiltersChange:f}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(i.XI,{children:[(0,n.jsx)(i.A0,{children:w.getHeaderGroups().map(e=>(0,n.jsx)(i.Hj,{children:e.headers.map(e=>(0,n.jsx)(i.nd,{children:e.isPlaceholder?null:(0,o.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(i.BF,{children:h?(0,n.jsx)(i.Hj,{children:(0,n.jsx)(i.nA,{colSpan:t.length,className:"h-24 text-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Loading logs..."]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Hj,{className:"hover:bg-transparent",children:(0,n.jsx)(i.nA,{colSpan:t.length,className:"h-12 text-center",children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-2",children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Listening for logs..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),"Not connected to socket, please refresh the page."]})})})}),w.getRowModel().rows.length?w.getRowModel().rows.map(e=>(0,n.jsx)(i.Hj,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>null==v?void 0:v(e.original),children:e.getVisibleCells().map(e=>(0,n.jsx)(i.nA,{children:(0,o.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(i.Hj,{children:(0,n.jsx)(i.nA,{colSpan:t.length,className:"h-24 text-center",children:"No results found."})})]})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,n.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[S.toLocaleString(),"-",A.toLocaleString()," of ",l.toLocaleString()," entries"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>C(_-1),disabled:1===_,children:(0,n.jsx)(m.A,{className:"size-3"})}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Page"}),(0,n.jsx)("span",{children:_}),(0,n.jsxs)("span",{children:["of ",k]})]}),(0,n.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>C(_+1),disabled:_===k,children:(0,n.jsx)(p.A,{className:"size-3"})})]})]})]})}var B=s(8145),M=s(1085),I=s(6561),O=s(7434),R=s(5868);function q(e){if(null===e.value)return null;let t=e.orientation||"vertical";return(0,n.jsx)("div",{className:(0,j.cn)("items-top flex flex-col gap-2",{["".concat(e.className)]:void 0!==e.className,"items-start":"left"===e.align||void 0===e.align,"items-end":"right"===e.align}),children:(0,n.jsxs)("div",{className:e.containerClassName,children:[""!==e.label&&(0,n.jsx)("div",{className:"text-muted-foreground flex shrink-0 flex-row items-center gap-2 text-xs font-medium",children:e.label.toUpperCase()}),(0,n.jsx)("div",{className:(0,j.cn)("text-md flex text-xs font-medium whitespace-nowrap transition-transform delay-75",{"w-full flex-col items-center gap-2":"horizontal"===t,"flex-row items-start gap-2":"vertical"===t,["".concat(e.valueClassName)]:void 0!==e.valueClassName,"text-end":"right"===e.align}),children:e.value})]})})}var E=s(2940),F=s.n(E),P=s(6037),D=s(1154),W=s(1362);let K=(0,s(5028).default)(()=>s.e(364).then(s.bind(s,1364)).then(e=>e.default),{loadableGenerated:{webpack:()=>[1364]},ssr:!1,loading:()=>(0,n.jsx)(D.A,{className:"h-4 w-4 animate-spin p-4"})});function G(e){var t,s,l,o,r,i,c,d,u,m,p,h,x,g,f,v;let{className:y,lang:N,code:b,onChange:w,height:_,minHeight:k}=e,S=(0,a.useRef)(null),[A,C]=(0,a.useState)(!1),[L,H]=(0,a.useState)(e.height||e.minHeight||200);(0,a.useEffect)(()=>{C(!0)},[]);let{theme:T,systemTheme:z}=(0,W.D)(),B={lineNumbers:(null==(t=e.options)?void 0:t.lineNumbers)||"off",readOnly:e.readonly,scrollBeyondLastLine:null!=(p=null==(s=e.options)?void 0:s.scrollBeyondLastLine)&&p,minimap:{enabled:!1},contextmenu:!1,fontFamily:"var(--font-geist-mono)",fontSize:e.fontSize||12.5,padding:{top:2,bottom:2},wordWrap:e.wrap?"on":"off",folding:null!=(h=null==(l=e.options)?void 0:l.collapsibleBlocks)&&h,glyphMargin:!1,lineNumbersMinChars:null!=(x=null==(o=e.options)?void 0:o.lineNumbersMinChars)?x:4,overviewRulerLanes:null!=(g=null==(r=e.options)?void 0:r.overviewRulerLanes)?g:0,renderLineHighlight:"none",cursorStyle:"line",cursorBlinking:"smooth",scrollbar:{vertical:(null==(i=e.options)?void 0:i.showVerticalScrollbar)?"auto":"hidden",horizontal:(null==(c=e.options)?void 0:c.showHorizontalScrollbar)?"auto":"hidden",alwaysConsumeMouseWheel:null!=(f=null==(d=e.options)?void 0:d.alwaysConsumeMouseWheel)&&f},guides:{indentation:null==(v=null==(u=e.options)?void 0:u.showIndentLines)||v},hover:{enabled:!(null==(m=e.options)?void 0:m.disableHover)},wordBasedSuggestions:"off",...e.options};return A?(0,n.jsx)("div",{id:e.id,ref:S,className:(0,j.cn)("group relative h-full w-full",e.containerClassName),onBlur:e.onBlur,children:(0,n.jsx)(K,{height:L,width:e.width,language:N||"javascript",value:b||"",theme:"dark"===T||"system"===T&&"dark"===z?"custom-dark":"light",options:B,loading:(0,n.jsx)(D.A,{className:"h-4 w-4 animate-spin"}),onChange:e=>{w&&w(e||"")},onMount:(t,s)=>{if(e.autoFocus&&t.focus(),e.shouldAdjustInitialHeight||e.autoResize){let s=()=>{try{let s=t.getContentHeight();e.minHeight&&s<e.minHeight&&(s=e.minHeight),e.maxHeight&&s>e.maxHeight&&(s=e.maxHeight),H(s+15),t.layout()}catch(e){console.warn("Error updating editor height:",e)}};if(setTimeout(s,100),e.autoResize){let e=t.getModel();e&&e.onDidChangeContent(()=>{requestAnimationFrame(s)})}}if(e.autoFormat)try{var n;null==(n=t.getAction("editor.action.formatDocument"))||n.run()}catch(e){console.warn("Auto-format failed:",e)}},className:(0,j.cn)("code text-md w-full bg-transparent ring-offset-transparent outline-none",y),beforeMount:e=>{window.MonacoEnvironment={getWorker:()=>({postMessage:()=>{},terminate:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1,onerror:null,onmessage:null,onmessageerror:null})},e.editor.defineTheme("custom-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#00000000",focusBorder:"#00000000","editor.lineHighlightBorder":"#00000000","editor.selectionHighlightBorder":"#00000000","editorWidget.border":"#00000000","editorOverviewRuler.border":"#00000000"}})}})}):(0,n.jsx)("div",{className:(0,j.cn)("group relative flex h-24 w-full items-center justify-center",e.containerClassName),children:(0,n.jsx)(D.A,{className:"h-4 w-4 animate-spin"})})}let Y=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},J=e=>{try{return JSON.parse(e)}catch(t){return e}};function U(e){let{message:t}=e;return(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium capitalize",children:t.role}),"string"==typeof t.content&&t.content.length>0&&!Y(t.content)?(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:t.content}):t.content.length>0&&(0,n.jsx)(G,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:250,wrap:!0,code:JSON.stringify(J(t.content),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}}),t.tool_calls&&t.tool_calls.length>0&&(0,n.jsx)("div",{className:"border-b last:border-b-0",children:(0,n.jsx)(G,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:150,wrap:!0,code:JSON.stringify(J(t.tool_calls),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})})]})}function $(e){var t,s,a,l,o,r,i,c;let{log:d,open:u,onOpenChange:m}=e;if(!d)return null;d.latency;let p=d.token_usage;p&&(p.completion_tokens,p.total_tokens),p&&(p.prompt_tokens,p.completion_tokens,p.prompt_tokens,p.completion_tokens);let h=null;if(null==(t=d.params)?void 0:t.tools)try{h=JSON.stringify(d.params.tools,null,2)}catch(e){}let x=null;if(null==(s=d.params)?void 0:s.tool_choice)try{x=JSON.stringify(d.params.tool_choice,null,2)}catch(e){}return(0,n.jsx)(M.cj,{open:u,onOpenChange:m,children:(0,n.jsxs)(M.h,{className:"flex w-full flex-col overflow-x-hidden p-8 sm:max-w-2xl",children:[(0,n.jsx)(M.Fm,{className:"px-0",children:(0,n.jsxs)(M.qp,{className:"flex w-fit items-center gap-2 font-medium",children:["success"===d.status&&(0,n.jsxs)("p",{className:"text-md max-w-full truncate",children:["Request ID: ",d.id]}),(0,n.jsx)(B.E,{variant:"outline",className:L.Ez[d.status],children:d.status})]})}),(0,n.jsxs)("div",{className:"space-y-4 rounded-sm border px-6 py-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(V,{title:"Timings",icon:(0,n.jsx)(I.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(q,{className:"w-full",label:"Start Timestamp",value:F()(d.timestamp).format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(q,{className:"w-full",label:"End Timestamp",value:F()(d.timestamp).add(d.latency||0,"ms").format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(q,{className:"w-full",label:"Latency",value:isNaN(d.latency||0)?"NA":(0,n.jsxs)("div",{children:[null==(a=d.latency||0)?void 0:a.toFixed(2),"ms"]})})]})]}),(0,n.jsx)(P.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(V,{title:"Request Details",icon:(0,n.jsx)(O.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(q,{className:"w-full",label:"Provider",value:L.oU[d.provider]}),(0,n.jsx)(q,{className:"w-full",label:"Model",value:d.model}),(0,n.jsx)(q,{className:"w-full",label:"Type",value:(0,n.jsx)("div",{className:"".concat(L.wf[d.object]," rounded-md px-3 py-1"),children:L.tJ[d.object]})}),d.params&&Object.keys(d.params).length>0&&Object.entries(d.params).filter(e=>{let[t]=e;return"tools"!==t}).filter(e=>{let[t,s]=e;return"boolean"==typeof s||"number"==typeof s||"string"==typeof s}).map(e=>{let[t,s]=e;return(0,n.jsx)(q,{className:"w-full",label:t,value:s},t)})]})]}),"success"===d.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(V,{title:"Tokens",icon:(0,n.jsx)(R.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(q,{className:"w-full",label:"Prompt Tokens",value:null==(l=d.token_usage)?void 0:l.prompt_tokens}),(0,n.jsx)(q,{className:"w-full",label:"Completion Tokens",value:null==(o=d.token_usage)?void 0:o.completion_tokens}),(0,n.jsx)(q,{className:"w-full",label:"Total Tokens",value:null==(r=d.token_usage)?void 0:r.total_tokens})]})]})]})]}),x&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tool Choice"}),(0,n.jsx)(G,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:x,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),h&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tools"}),(0,n.jsx)(G,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:h,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Conversation History"}),d.input_history&&d.input_history.map(e=>(0,n.jsx)(U,{message:e},e.content.toString())),(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Response"}),"success"===d.status?d.output_message&&(0,n.jsx)(U,{message:d.output_message}):(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Error"}),(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:null==(i=d.error_details)?void 0:i.error.message})]})]})})}let V=e=>{let{title:t,icon:s}=e;return(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"text-sm font-medium",children:t})})};var Z=s(1492);let X=()=>[{accessorKey:"timestamp",header:e=>{let{column:t}=e;return(0,n.jsxs)(c.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Time",(0,n.jsx)(Z.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.timestamp;return(0,n.jsx)("div",{className:"font-mono text-sm",children:new Date(s).toLocaleString()})}},{accessorKey:"provider",header:"Provider",cell:e=>{let{row:t}=e,s=t.original.provider;return(0,n.jsx)(B.E,{variant:"secondary",className:"".concat(L.RY[s]," capitalize"),children:s})}},{accessorKey:"model",header:"Model",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"max-w-[240px] truncate text-sm font-medium",children:t.original.model})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,s=t.original.status;return(0,n.jsx)(B.E,{variant:"secondary",className:L.Ez[s],children:s})}},{accessorKey:"latency",header:e=>{let{column:t}=e;return(0,n.jsxs)(c.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Latency",(0,n.jsx)(Z.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.latency;return(0,n.jsx)("div",{className:"font-mono text-sm",children:s?"".concat(s.toLocaleString(),"ms"):"N/A"})}},{accessorKey:"token_usage.total_tokens",header:e=>{let{column:t}=e;return(0,n.jsxs)(c.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Tokens",(0,n.jsx)(Z.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.token_usage;return s?(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono",children:s.total_tokens.toLocaleString()}),(0,n.jsxs)("div",{className:"text-muted-foreground text-xs",children:[s.prompt_tokens,"+",s.completion_tokens]})]}):(0,n.jsx)("div",{className:"font-mono text-sm",children:"N/A"})}},{id:"request_type",header:"Type",cell:e=>{let{row:t}=e;return(0,n.jsx)(B.E,{variant:"outline",className:"".concat(L.wf[t.original.object]," text-xs"),children:L.tJ[t.original.object]})}}];var Q=s(1886),ee=s(8482),et=s(9026),es=s(741),en=s(646),ea=s(4186),el=s(5448),eo=s(5339),er=s(9509),ei=s(4964),ec=s(4357),ed=s(2138),eu=s(6671),em=s(5784);let ep={curl:'curl -X POST http://localhost:8080/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "openai/gpt-4o-mini",\n    "messages": [\n      {"role": "user", "content": "Hello!"}\n    ]\n  }\'',sdk:{openai:{python:'import openai\n\nclient = openai.OpenAI(\n    base_url="http://localhost:8080/openai",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-4o-mini",\n    messages=[{"role": "user", "content": "Hello!"}]\n)',typescript:'import OpenAI from "openai";\n\nconst openai = new OpenAI({\n  baseURL: "http://localhost:8080/openai",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await openai.chat.completions.create({\n  model: "gpt-4o-mini",\n  messages: [{ role: "user", content: "Hello!" }],\n});'},anthropic:{python:'import anthropic\n\nclient = anthropic.Anthropic(\n    base_url="http://localhost:8080/anthropic",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.messages.create(\n    model="claude-3-sonnet-20240229",\n    max_tokens=1000,\n    messages=[{"role": "user", "content": "Hello!"}]\n)',typescript:'import Anthropic from "@anthropic-ai/sdk";\n\nconst anthropic = new Anthropic({\n  baseURL: "http://localhost:8080/anthropic",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await anthropic.messages.create({\n  model: "claude-3-sonnet-20240229",\n  max_tokens: 1000,\n  messages: [{ role: "user", content: "Hello!" }],\n});'},genai:{python:'from google import genai\nfrom google.genai.types import HttpOptions\n\nclient = genai.Client(\n    api_key="dummy-api-key", # Handled by Bifrost\n    http_options=HttpOptions(base_url="http://localhost:8080/genai")\n)\n\nresponse = client.models.generate_content(\n    model="gemini-pro",\n    contents="Hello!"\n)',typescript:'import { GoogleGenerativeAI } from "@google/generative-ai";\n\nconst genAI = new GoogleGenerativeAI("dummy-api-key", { // Handled by Bifrost\n  baseUrl: "http://localhost:8080/genai",\n});\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst response = await model.generateContent("Hello!");'}}},eh={scrollBeyondLastLine:!1,minimap:{enabled:!1},lineNumbers:"off",folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,glyphMargin:!1};function ex(e){let{code:t,language:s,onLanguageChange:a,showLanguageSelect:l=!1,readonly:o=!0}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-2",children:[l&&a&&(0,n.jsxs)(em.l6,{value:s,onValueChange:a,children:[(0,n.jsx)(em.bq,{className:"h-8 w-fit text-xs",children:(0,n.jsx)(em.yv,{})}),(0,n.jsxs)(em.gC,{children:[(0,n.jsx)(em.eb,{className:"text-xs",value:"python",children:"Python"}),(0,n.jsx)(em.eb,{className:"text-xs",value:"typescript",children:"TypeScript"})]})]}),(0,n.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(t),eu.o.success("Copied to clipboard")},children:(0,n.jsx)(ec.A,{className:"size-4"})})]}),(0,n.jsx)(G,{className:"w-full",code:t,lang:s,readonly:o,height:300,fontSize:14,options:eh})]})}let eg=[{title:"What You'll See Here",description:"Real-time request logs from all your API calls",features:["Real-time request logs from all your API calls","Comprehensive request and error details","Token usage, latency, and cost metrics","Advanced filtering and search capabilities"]},{title:"Getting Started",description:"Use the examples below to get started",features:["Choose an example from below","Set Bifrost as your API endpoint","Send a test request","Monitor the response in real-time"]}];function ef(e){let{isSocketConnected:t}=e,[s,l]=(0,a.useState)("python");return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-2 text-center",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold",children:"Welcome to Request Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground text-lg",children:"Monitor and analyze all your API requests in real-time"})]}),t&&(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),(0,n.jsx)("span",{children:"Listening for logs..."})]}),(0,n.jsx)("div",{className:"grid w-full max-w-4xl grid-cols-1 gap-6 px-4 md:grid-cols-2",children:eg.map(e=>(0,n.jsxs)(ee.Zp,{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,n.jsx)("p",{className:"text-muted-foreground",children:e.description}),(0,n.jsx)("ul",{className:"text-muted-foreground space-y-3",children:e.features.map(e=>(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)(ed.A,{className:"mt-0.5 h-5 w-5 shrink-0"}),(0,n.jsx)("span",{children:e})]},e))})]},e.title))}),(0,n.jsxs)("div",{className:"w-full max-w-4xl px-4",children:[(0,n.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:"Integration Examples"}),(0,n.jsxs)(ei.Tabs,{defaultValue:"curl",className:"w-full",children:[(0,n.jsxs)(ei.TabsList,{className:"h-10 w-full justify-start",children:[(0,n.jsx)(ei.TabsTrigger,{value:"curl",children:"cURL"}),(0,n.jsx)(ei.TabsTrigger,{value:"openai",children:"OpenAI SDK"}),(0,n.jsx)(ei.TabsTrigger,{value:"anthropic",children:"Anthropic SDK"}),(0,n.jsx)(ei.TabsTrigger,{value:"genai",children:"Google GenAI SDK"})]}),(0,n.jsx)(ei.TabsContent,{value:"curl",className:"p-4",children:(0,n.jsx)(ex,{code:ep.curl,language:"bash",readonly:!1})}),Object.keys(ep.sdk).map(e=>(0,n.jsx)(ei.TabsContent,{value:e,className:"space-y-4 p-4",children:(0,n.jsx)(ex,{code:ep.sdk[e][s],language:"typescript"===s?"typescript":"python",onLanguageChange:e=>l(e),showLanguageSelect:!0})},e))]})]})]})}var ej=s(2384);function ev(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(0),[r,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[v,y]=(0,a.useState)({providers:[],models:[],status:[],content_search:""}),[N,b]=(0,a.useState)({limit:50,offset:0,sort_by:"timestamp",order:"desc"}),{ws:w,isConnected:_}=function(e){let{onMessage:t}=e,s=(0,a.useRef)(null),n=(0,a.useRef)(null),[l,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=er.env.NEXT_PUBLIC_BIFROST_PORT||"8080",a=()=>{var l;if((null==(l=s.current)?void 0:l.readyState)===WebSocket.OPEN)return;let r=new WebSocket("ws://localhost:".concat(e,"/ws/logs"));s.current=r,r.onopen=()=>{console.log("WebSocket connected"),o(!0),n.current&&(clearTimeout(n.current),n.current=null)},r.onmessage=e=>{try{let s=JSON.parse(e.data);"log"===s.type&&t(s.payload)}catch(e){console.error("Failed to parse WebSocket message:",e)}},r.onclose=()=>{console.log("WebSocket disconnected, attempting to reconnect..."),o(!1),n.current=setTimeout(a,5e3)},r.onerror=e=>{o(!1),r.close()}};return a(),()=>{s.current&&(s.current.close(),s.current=null),n.current&&(clearTimeout(n.current),n.current=null),o(!1)}},[t]),{ws:s,isConnected:l}}({onMessage:(0,a.useCallback)(e=>{x&&g(!1),0===N.offset&&"timestamp"===N.sort_by&&"desc"===N.order&&(t(t=>{if(!A(e,v))return t;let s=[e,...t];return s.length>N.limit&&s.pop(),s}),o(e=>e+1),i(t=>{if(!t)return t;let s={...t};s.total_requests+=1;let n=t.success_rate/100*t.total_requests;return s.success_rate=("success"===e.status?n+1:n)/s.total_requests*100,e.latency&&(s.average_latency=(t.average_latency*t.total_requests+e.latency)/s.total_requests),e.token_usage&&(s.total_tokens+=e.token_usage.total_tokens),s}))},[N.offset,N.sort_by,N.order,N.limit,v,x])}),k=(0,a.useCallback)(async()=>{m(!0),h(null);try{let[e,s]=await Q.K.getLogs(v,N);s?(h(s),t([]),o(0)):e&&(t(e.logs||[]),o(e.stats.total_requests),i(e.stats),c&&g(0===e.stats.total_requests))}catch(e){h("Failed to fetch logs. Please try again."),t([]),o(0)}finally{m(!1)}},[v,N,c]);(0,a.useEffect)(()=>{c||k()},[k,c]),(0,a.useEffect)(()=>{k(),d(!1)},[]);let S=e=>"string"==typeof e?e:Array.isArray(e)?e.reduce((e,t)=>"text"===t.type&&t.text?e+t.text:e,""):"",A=(e,t)=>{var s,n,a;if((null==(s=t.providers)?void 0:s.length)&&!t.providers.includes(e.provider)||(null==(n=t.models)?void 0:n.length)&&!t.models.includes(e.model)||(null==(a=t.status)?void 0:a.length)&&!t.status.includes(e.status)||t.start_time&&new Date(e.timestamp)<new Date(t.start_time)||t.end_time&&new Date(e.timestamp)>new Date(t.end_time)||t.min_latency&&(!e.latency||e.latency<t.min_latency)||t.max_latency&&(!e.latency||e.latency>t.max_latency)||t.min_tokens&&(!e.token_usage||e.token_usage.total_tokens<t.min_tokens)||t.max_tokens&&(!e.token_usage||e.token_usage.total_tokens>t.max_tokens))return!1;if(t.content_search){let s=t.content_search.toLowerCase();if(![...(e.input_history||[]).map(e=>S(e.content)),e.output_message?S(e.output_message.content):""].join(" ").toLowerCase().includes(s))return!1}return!0},C=(0,a.useMemo)(()=>[{title:"Total Requests",value:(null==r?void 0:r.total_requests.toLocaleString())||"-",icon:(0,n.jsx)(es.A,{className:"size-4"})},{title:"Success Rate",value:r?"".concat(r.success_rate.toFixed(2),"%"):"-",icon:(0,n.jsx)(en.A,{className:"size-4"})},{title:"Avg Latency",value:r?"".concat(r.average_latency.toFixed(2),"ms"):"-",icon:(0,n.jsx)(ea.A,{className:"size-4"})},{title:"Total Tokens",value:(null==r?void 0:r.total_tokens.toLocaleString())||"-",icon:(0,n.jsx)(el.A,{className:"size-4"})}],[r]),L=X();return(0,n.jsxs)("div",{className:"bg-background",children:[(0,n.jsx)(l.A,{title:"Request Logs"}),c?(0,n.jsx)(ej.A,{}):x?(0,n.jsx)(ef,{isSocketConnected:_}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Request Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Monitor and analyze all API requests and responses"})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:C.map(e=>(0,n.jsx)(ee.Zp,{className:"py-4",children:(0,n.jsx)(ee.Wu,{className:"flex items-center justify-between px-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-muted-foreground text-xs",children:e.title}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.value})]})})},e.title))}),p&&(0,n.jsxs)(et.Fc,{variant:"destructive",children:[(0,n.jsx)(eo.A,{className:"h-4 w-4"}),(0,n.jsx)(et.TN,{children:p})]}),(0,n.jsx)(z,{columns:L,data:e,totalItems:s,loading:u,filters:v,pagination:N,onFiltersChange:y,onPaginationChange:b,onRowClick:j,isSocketConnected:_})]}),(0,n.jsx)($,{log:f,open:null!==f,onOpenChange:e=>!e&&j(null)})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,867,519,678,866,272,341,441,684,358],()=>t(5196)),_N_E=e.O()}]);