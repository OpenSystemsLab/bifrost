(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{1059:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ey});var n=t(5155),a=t(2115),r=t(9464),i=t(4964),l=t(7168),c=t(8145),o=t(4229),d=t(4213),u=t(1539),m=t(381),x=t(6671);function h(){return{toast:e=>{let{title:s,description:t,variant:n}=e,a=t?"".concat(s,": ").concat(t):s;"destructive"===n?x.o.error(a):x.o.success(a)}}}var p=t(1886),j=t(8482),f=t(4884),g=t(3999);let v=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(f.bL,{className:(0,g.cn)("peer focus-visible:ring-ring focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...a,ref:s,children:(0,n.jsx)(f.zi,{className:(0,g.cn)("bg-background pointer-events-none block h-5 w-5 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});v.displayName=f.bL.displayName;var y=t(1154),b=t(1243),N=t(7489),_=t(9026),C=t(9852);function w(e){let{className:s,...t}=e;return(0,n.jsx)("textarea",{"data-slot":"textarea",className:(0,g.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}function A(){let[e,s]=(0,a.useState)({drop_excess_requests:!1,initial_pool_size:300}),[t,r]=(0,a.useState)(!0),[i,l]=(0,a.useState)({initial_pool_size:"300",prometheus_labels:""}),c=(0,a.useRef)(void 0),o=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{(async()=>{let[e,t]=await p.K.getCoreConfig();if(t)x.o.error(t);else if(e){var n;s(e),l({initial_pool_size:(null==(n=e.initial_pool_size)?void 0:n.toString())||"300",prometheus_labels:e.prometheus_labels||""})}r(!1)})()},[]);let d=(0,a.useCallback)(async(t,n)=>{let a={...e,[t]:n};s(a);let[,r]=await p.K.updateCoreConfig(a);r?x.o.error(r):x.o.success("Core setting updated successfully.")},[e]),u=async(e,s)=>{await d(e,s)},m=(0,a.useCallback)(e=>{l(s=>({...s,initial_pool_size:e})),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{let s=parseInt(e);!isNaN(s)&&s>0&&d("initial_pool_size",s)},1e3)},[d]),h=(0,a.useCallback)(e=>{l(s=>({...s,prometheus_labels:e})),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d("prometheus_labels",e)},1e3)},[d]);return((0,a.useEffect)(()=>()=>{c.current&&clearTimeout(c.current),o.current&&clearTimeout(o.current)},[]),t)?(0,n.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,n.jsx)(y.A,{className:"h-4 w-4 animate-spin"})}):(0,n.jsxs)("div",{children:[(0,n.jsxs)(j.aR,{className:"mb-4 px-0",children:[(0,n.jsx)(j.ZB,{className:"flex items-center gap-2",children:"Core System Settings"}),(0,n.jsx)(j.BT,{children:"Configure core Bifrost settings like request handling, pool sizes, and system behavior."})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-4",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Drop Excess Requests"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"If enabled, Bifrost will drop requests that exceed pool capacity."})]}),(0,n.jsx)(v,{checked:e.drop_excess_requests,onCheckedChange:e=>u("drop_excess_requests",e)})]}),(0,n.jsx)(N.w,{}),(0,n.jsxs)(_.Fc,{children:[(0,n.jsx)(b.A,{className:"h-4 w-4"}),(0,n.jsx)(_.TN,{children:"The settings below won't affect current connections. You will need to save the configuration for changes to take effect on the next restart."})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-4",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Initial Pool Size"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"The initial connection pool size."})]}),(0,n.jsx)(C.p,{type:"number",className:"w-24",value:i.initial_pool_size,onChange:e=>m(e.target.value),min:"1"})]}),(0,n.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Prometheus Labels"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"Comma-separated list of custom labels to add to the Prometheus metrics."})]}),(0,n.jsx)(w,{className:"h-24",placeholder:"teamId, projectId, environment",value:i.prometheus_labels,onChange:e=>h(e.target.value)})]})]})]})}var k=t(8524),S=t(4616),z=t(9803),P=t(3717),E=t(2525),V=t(7783),T=t(7649);function I(e){let{...s}=e;return(0,n.jsx)(T.bL,{"data-slot":"alert-dialog",...s})}function R(e){let{...s}=e;return(0,n.jsx)(T.l9,{"data-slot":"alert-dialog-trigger",...s})}function M(e){let{...s}=e;return(0,n.jsx)(T.ZL,{"data-slot":"alert-dialog-portal",...s})}function q(e){let{className:s,...t}=e;return(0,n.jsx)(T.hJ,{"data-slot":"alert-dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function B(e){let{className:s,...t}=e;return(0,n.jsxs)(M,{children:[(0,n.jsx)(q,{}),(0,n.jsx)(T.UC,{"data-slot":"alert-dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t})]})}function D(e){let{className:s,...t}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function L(e){let{className:s,...t}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function Z(e){let{className:s,...t}=e;return(0,n.jsx)(T.hE,{"data-slot":"alert-dialog-title",className:(0,g.cn)("text-lg font-semibold",s),...t})}function F(e){let{className:s,...t}=e;return(0,n.jsx)(T.VY,{"data-slot":"alert-dialog-description",className:(0,g.cn)("text-muted-foreground text-sm",s),...t})}function H(e){let{className:s,...t}=e;return(0,n.jsx)(T.rc,{className:(0,g.cn)((0,l.r)({variant:"destructive"}),s),...t})}function O(e){let{className:s,...t}=e;return(0,n.jsx)(T.ZD,{className:(0,g.cn)((0,l.r)({variant:"outline"}),s),...t})}var U=t(5784),$=t(9840),K=t(7777),Y=t(4416);let G=a.forwardRef((e,s)=>{let{className:t,value:r,onValueChange:i,...l}=e,[o,d]=a.useState(""),u=e=>{i(r.filter(s=>s!==e))};return(0,n.jsxs)("div",{className:(0,g.cn)("border-input flex flex-wrap items-center gap-2 rounded-md border p-2",t),children:[r.map(e=>(0,n.jsxs)(c.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,n.jsx)("button",{type:"button",className:"ring-offset-background focus:ring-ring cursor-pointer rounded-full outline-none focus:ring-2 focus:ring-offset-2",onClick:()=>u(e),children:(0,n.jsx)(Y.A,{className:"h-3 w-3"})})]},e)),(0,n.jsx)(C.p,{ref:s,type:"text",value:o,onChange:e=>{d(e.target.value)},onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();let s=o.trim();s&&!r.includes(s)&&i([...r,s]),d("")}else"Backspace"===e.key&&""===o&&r.length>0&&i(r.slice(0,-1))},className:"flex-1 border-0 shadow-none focus-visible:ring-0",...l})]})});G.displayName="TagInput";var J=t(6037),W=t(1284),X=t(4869),Q=t(9231),ee=t.n(Q),es=t(8103);let et={azure:{title:"Azure OpenAI Meta Config",fields:[{name:"endpoint",label:"Endpoint",type:"text",placeholder:"https://your-resource.openai.azure.com or env.AZURE_ENDPOINT"},{name:"api_version",label:"API Version (Optional)",type:"text",placeholder:"YYYY-MM-DD or env.AZURE_VERSION"},{name:"deployments",label:"Deployments (JSON format)",type:"textarea",placeholder:'{ "gpt-4": "my-deployment" }',isJson:!0}]},bedrock:{title:"AWS Bedrock Meta Config",fields:[{name:"region",label:"Region",type:"text",placeholder:"us-east-1 or env.AWS_REGION"}]},vertex:{title:"Google Vertex AI Meta Config",fields:[{name:"project_id",label:"Project ID",type:"text",placeholder:"gcp-project-id or env.GCP_PROJECT"},{name:"region",label:"Region",type:"text",placeholder:"us-central1 or env.GCP_REGION"},{name:"auth_credentials",label:"Auth Credentials (JSON key)",type:"textarea",placeholder:"JSON key or env.GCP_CREDS"}]}},en=e=>{let{provider:s,metaConfig:t,onMetaConfigChange:a}=e,r=et[s];if(!r)return null;let i=e=>{let s=t[e.name];return"textarea"===e.type?(0,n.jsx)(w,{placeholder:e.placeholder,value:e.isJson?"string"==typeof s?s:JSON.stringify(s,null,2):s||"",onChange:s=>{a(e.name,s.target.value)},onBlur:s=>{if(e.isJson)try{let t=JSON.parse(s.target.value);a(e.name,t)}catch(e){}},rows:4,className:"max-w-full font-mono text-sm wrap-anywhere"}):(0,n.jsx)(C.p,{placeholder:e.placeholder,value:s||"",onChange:s=>a(e.name,s.target.value)})};return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(j.aR,{className:"mb-2 px-0",children:(0,n.jsxs)(j.ZB,{className:"flex items-center gap-2 text-base",children:[(0,n.jsx)(es.A,{className:"h-4 w-4"}),r.title,(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(W.A,{className:"text-muted-foreground ml-1 h-3 w-3"})})}),(0,n.jsx)(K.ZI,{className:"max-w-fit",children:(0,n.jsxs)("p",{children:["Use ",(0,n.jsx)("code",{className:"rounded bg-neutral-100 px-1 py-0.5 text-neutral-800",children:"env.<VAR>"})," to read the value from an environment variable."]})})]})})]})}),(0,n.jsx)(j.Wu,{className:"space-y-4 px-0",children:r.fields.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:e.label}),i(e)]},e.name))})]})};class ea{isValid(){return!this.rules.some(e=>!e.isValid)}getErrors(){return this.rules.filter(e=>!e.isValid).map(e=>e.message)}getFirstError(){let e=this.rules.find(e=>!e.isValid);return null==e?void 0:e.message}static required(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This field is required";return{isValid:null!=e&&""!==e&&0!==e,message:s}}static minValue(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at least ".concat(s);return{isValid:!isNaN(e)&&e>=s,message:t}}static maxValue(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at most ".concat(s);return{isValid:!isNaN(e)&&e<=s,message:t}}static pattern(e,s,t){return{isValid:s.test(e||""),message:t}}static email(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be a valid email";return this.pattern(e,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,s)}static url(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be a valid URL";return this.pattern(e,/^https?:\/\/.+/,s)}static minLength(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at least ".concat(s," characters");return{isValid:(e||"").length>=s,message:t}}static maxLength(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at most ".concat(s," characters");return{isValid:(e||"").length<=s,message:t}}static arrayMinLength(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must have at least ".concat(s," items");return{isValid:(null==e?void 0:e.length)>=s,message:t}}static arrayMaxLength(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must have at most ".concat(s," items");return{isValid:(null==e?void 0:e.length)<=s,message:t}}static custom(e,s){return{isValid:e,message:s}}static all(e){return e.find(e=>!e.isValid)||{isValid:!0,message:""}}constructor(e){this.rules=e.filter(e=>void 0!==e)}}var er=t(4432);let ei={base_url:"",default_request_timeout_in_seconds:30,max_retries:0,retry_backoff_initial:1e3,retry_backoff_max:1e4},el={concurrency:10,buffer_size:100},ec={connected:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",disconnected:"bg-gray-100 text-gray-800"},eo=(e,s)=>{let t=!e,n=(null==e?void 0:e.name)||s||"",a=!["vertex","ollama"].includes(n);return{selectedProvider:n,keys:t&&a?[{value:"",models:[],weight:1}]:!t&&a&&(null==e?void 0:e.keys)?e.keys:[],networkConfig:(null==e?void 0:e.network_config)||ei,performanceConfig:(null==e?void 0:e.concurrency_and_buffer_size)||el,metaConfig:(null==e?void 0:e.meta_config)||{endpoint:"",deployments:{},api_version:""},proxyConfig:(null==e?void 0:e.proxy_config)||{type:"none",url:"",username:"",password:""}}};function ed(e){let{provider:s,onSave:t,onCancel:r,existingProviders:i}=e,c=s?void 0:V.xq.find(e=>!i.includes(e))||"",[d]=(0,a.useState)(eo(s,c)),[m,h]=(0,a.useState)({...d,isDirty:!1}),[f,v]=(0,a.useState)(!1),{selectedProvider:y,keys:N,networkConfig:w,performanceConfig:A,metaConfig:k,proxyConfig:P,isDirty:E}=m,T="ollama"===y,I=!["vertex","ollama"].includes(y);I&&N.every(e=>""!==e.value.trim()),I&&N.length;let R=A.concurrency>0&&A.buffer_size>0&&A.concurrency<A.buffer_size,M=A.concurrency!==d.performanceConfig.concurrency||A.buffer_size!==d.performanceConfig.buffer_size,{valid:q,message:B}=(()=>{let e=!0,s="";if("azure"===y){let t=!!k.endpoint&&""!==k.endpoint.trim(),n=!!(k.deployments&&"object"==typeof k.deployments&&Object.keys(k.deployments).length>0);(e=t&&n)||(s="Endpoint and at least one Deployment are required for Azure")}else if("bedrock"===y)(e=!!k.region&&""!==k.region.trim())||(s="Region is required for AWS Bedrock");else if("vertex"===y){let t=!!k.project_id&&""!==k.project_id.trim(),n=!!k.auth_credentials&&""!==k.auth_credentials.trim(),a=!!k.region&&""!==k.region.trim();(e=t&&n&&a)||(s="Project ID, Auth Credentials, and Region are required for Vertex AI")}return{valid:e,message:s}})(),D=!!s||""!==y;(0,a.useEffect)(()=>{let e={selectedProvider:y,keys:I?N:[],networkConfig:w,performanceConfig:A,metaConfig:k,proxyConfig:P};h(s=>({...s,isDirty:!ee()(d,e)}))},[y,N,w,A,k,P,d,I]);let L=(e,s)=>{h(t=>({...t,[e]:s}))},Z=(e,s)=>{L("proxyConfig",{...P,[e]:s})},F=s?V.xq:V.xq.filter(e=>!i.includes(e)),H=async e=>{if(!O.isValid())return void x.o.error(O.getFirstError());e.preventDefault(),v(!0);let n=null;if(s){let e={keys:I?N.filter(e=>""!==e.value.trim()):[],network_config:w,concurrency_and_buffer_size:A,meta_config:k,proxy_config:P};[,n]=await p.K.updateProvider(s.name,e)}else{let e={provider:y,keys:I?N.filter(e=>""!==e.value.trim()):[],network_config:w,concurrency_and_buffer_size:A,meta_config:k,proxy_config:P};[,n]=await p.K.createProvider(e)}v(!1),n?x.o.error(n):(x.o.success("Provider ".concat(s?"updated":"added"," successfully")),t())},O=new ea([ea.required(y,"Please select a provider"),ea.custom(E,"No changes to save"),...T?[ea.required(w.base_url,"Base URL is required for Ollama provider"),ea.pattern(w.base_url||"",/^https?:\/\/.+/,"Base URL must start with http:// or https://")]:[],...I?[ea.minValue(N.length,1,"At least one API key is required"),ea.custom(N.every(e=>""!==e.value.trim()),"API key value cannot be empty")]:[],ea.minValue(w.default_request_timeout_in_seconds,1,"Timeout must be greater than 0 seconds"),ea.minValue(w.max_retries,0,"Max retries cannot be negative"),ea.minValue(A.concurrency,1,"Concurrency must be greater than 0"),ea.minValue(A.buffer_size,1,"Buffer size must be greater than 0"),ea.custom(A.concurrency<A.buffer_size,"Buffer size must be greater than concurrency"),ea.custom(q,B),..."azure"===y?[ea.required(k.endpoint,"Azure endpoint is required"),ea.minValue(Object.keys(k.deployments||{}).length,1,"At least one Azure deployment is required")]:[],..."bedrock"===y?[ea.required(k.region,"AWS region is required")]:[],..."vertex"===y?[ea.required(k.project_id,"Project ID is required for Vertex AI"),ea.required(k.auth_credentials,"Auth credentials are required for Vertex AI"),ea.required(k.region,"Region is required for Vertex AI")]:[]]),Q=e=>{L("keys",N.filter((s,t)=>t!==e))},es=(e,s,t)=>{let n=[...N],a={...n[e]};"models"===s&&Array.isArray(t)?a.models=t:"value"===s&&"string"==typeof t?a.value=t:"weight"===s&&"string"==typeof t&&(a.weight=parseFloat(t)||1),n[e]=a,L("keys",n)};return(0,n.jsx)($.lG,{open:!0,onOpenChange:r,children:(0,n.jsxs)($.Cf,{className:"max-h-[90vh] overflow-y-auto sm:max-w-3xl",children:[(0,n.jsxs)($.c7,{children:[(0,n.jsx)($.L3,{children:s?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["Edit Provider"," ",(0,n.jsx)("span",{className:"font-semibold ".concat(V.RY[s.name]," rounded-md px-2 py-1"),children:V.oU[s.name]})]}):(0,n.jsx)("div",{className:"flex items-center gap-2",children:"Add Provider"})}),(0,n.jsx)($.rr,{children:"Configure AI provider settings, API keys, and network options."})]}),(0,n.jsx)(J.Separator,{}),(0,n.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-8",children:[!s&&(0===F.length?(0,n.jsx)("div",{className:"text-muted-foreground py-8 text-center font-medium",children:"All providers have been configured."}):(0,n.jsx)("div",{className:"grid grid-cols-4 gap-4",children:V.xq.map(e=>(0,n.jsxs)("div",{className:(0,g.cn)("flex w-full items-center gap-2 rounded-lg border px-4 py-3 text-sm",V.RY[e],y===e?"border-primary/20 opacity-100 hover:opacity-100":F.includes(e)?"cursor-pointer border-transparent opacity-60 hover:opacity-80 hover:shadow-md":"cursor-not-allowed border-transparent opacity-30"),onClick:()=>{F.includes(e)&&L("selectedProvider",e)},children:[er.F[e],(0,n.jsx)("div",{className:"text-sm",children:V.oU[e]})]},e))})),D&&(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(j.aR,{className:"mb-2 px-0",children:(0,n.jsxs)(j.ZB,{className:"flex items-center justify-between text-base",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.A,{className:"h-4 w-4"}),"API Keys",(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(W.A,{className:"text-muted-foreground ml-1 h-3 w-3"})})}),(0,n.jsx)(K.ZI,{className:"max-w-fit",children:(0,n.jsxs)("p",{children:["Use ",(0,n.jsx)("code",{className:"rounded bg-neutral-100 px-1 py-0.5 text-neutral-800",children:"env.<VAR>"})," to read the value from an environment variable."]})})]})})]}),(0,n.jsxs)(l.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{L("keys",[...N,{value:"",models:[],weight:1}])},children:[(0,n.jsx)(S.A,{className:"h-4 w-4"}),"Add Key"]})]})}),(0,n.jsx)("div",{className:"space-y-4",children:N.map((e,s)=>(0,n.jsxs)("div",{className:"space-y-4 rounded-md border p-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"text-sm font-medium",children:"API Key"}),(0,n.jsx)(C.p,{placeholder:"API Key or env.MY_KEY",value:e.value,onChange:e=>es(s,"value",e.target.value),type:"text",className:"flex-1 ".concat(I&&""===e.value.trim()?"border-destructive":"")})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Weight"}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(W.A,{className:"text-muted-foreground h-3 w-3"})})}),(0,n.jsx)(K.ZI,{children:(0,n.jsx)("p",{children:"Determines traffic distribution between keys. Higher weights receive more requests."})})]})})]}),(0,n.jsx)(C.p,{placeholder:"1.0",value:e.weight,onChange:e=>es(s,"weight",e.target.value),type:"number",step:"0.1",min:"0.1",className:"w-20"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Models (Optional)"}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(W.A,{className:"text-muted-foreground h-3 w-3"})})}),(0,n.jsx)(K.ZI,{children:(0,n.jsx)("p",{children:"Comma-separated list of models this key applies to. Leave blank for all models."})})]})})]}),(0,n.jsx)(G,{placeholder:"e.g. gpt-4, gpt-3.5-turbo",value:e.models||[],onValueChange:e=>es(s,"models",e)})]}),N.length>1&&(0,n.jsxs)(l.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>Q(s),className:"mt-2",children:[(0,n.jsx)(Y.A,{className:"h-4 w-4"}),"Remove Key"]})]},s))})]}),(0,n.jsx)(en,{provider:y,metaConfig:k,onMetaConfigChange:(e,s)=>{L("metaConfig",{...k,[e]:s})}}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j.aR,{className:"mb-2 px-0",children:(0,n.jsxs)(j.ZB,{className:"flex items-center gap-2 text-base",children:[(0,n.jsx)(X.A,{className:"h-4 w-4"}),"Network Configuration"]})}),(0,n.jsx)(j.Wu,{className:"space-y-4 px-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"text-sm font-medium",children:["Base URL ",T?"(Required)":"(Optional)"]}),(0,n.jsx)(C.p,{placeholder:"https://api.example.com",value:w.base_url||"",onChange:e=>L("networkConfig",{...w,base_url:e.target.value}),className:T&&!w.base_url?"border-destructive":""})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,n.jsx)(C.p,{type:"number",placeholder:"30",value:w.default_request_timeout_in_seconds,onChange:e=>L("networkConfig",{...w,default_request_timeout_in_seconds:parseInt(e.target.value)||30})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Max Retries"}),(0,n.jsx)(C.p,{type:"number",placeholder:"0",value:w.max_retries,onChange:e=>L("networkConfig",{...w,max_retries:parseInt(e.target.value)||0})})]})]})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j.aR,{className:"mb-2 px-0",children:(0,n.jsxs)(j.ZB,{className:"flex items-center gap-2 text-base",children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),"Performance Settings"]})}),M&&(0,n.jsxs)(_.Fc,{className:"mb-3",children:[(0,n.jsx)(b.A,{className:"h-4 w-4"}),(0,n.jsxs)(_.TN,{children:[(0,n.jsx)("strong",{children:"Heads up:"})," Changing concurrency or buffer size may temporarily affect request latency for this provider while the new settings are being applied."]})]}),(0,n.jsx)(j.Wu,{className:"space-y-4 px-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Concurrency"}),(0,n.jsx)(C.p,{type:"number",value:A.concurrency,onChange:e=>L("performanceConfig",{...A,concurrency:parseInt(e.target.value)||0}),className:R?"":"border-destructive"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Buffer Size"}),(0,n.jsx)(C.p,{type:"number",value:A.buffer_size,onChange:e=>L("performanceConfig",{...A,buffer_size:parseInt(e.target.value)||0}),className:R?"":"border-destructive"})]})]})})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(j.aR,{className:"mb-2 px-0",children:(0,n.jsxs)(j.ZB,{className:"flex items-center gap-2 text-base",children:[(0,n.jsx)(X.A,{className:"h-4 w-4"}),"Proxy Settings"]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Proxy Type"}),(0,n.jsxs)(U.l6,{value:P.type,onValueChange:e=>Z("type",e),children:[(0,n.jsx)(U.bq,{className:"w-48",children:(0,n.jsx)(U.yv,{placeholder:"Select type"})}),(0,n.jsxs)(U.gC,{children:[(0,n.jsx)(U.eb,{value:"none",children:"None"}),(0,n.jsx)(U.eb,{value:"http",children:"HTTP"}),(0,n.jsx)(U.eb,{value:"socks5",children:"SOCKS5"}),(0,n.jsx)(U.eb,{value:"environment",children:"Environment"})]})]})]}),"none"!==P.type&&"environment"!==P.type&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Proxy URL"}),(0,n.jsx)(C.p,{placeholder:"http://proxy.example.com:8080",value:P.url||"",onChange:e=>Z("url",e.target.value)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Username"}),(0,n.jsx)(C.p,{value:P.username||"",onChange:e=>Z("username",e.target.value),placeholder:"Proxy username"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"Password"}),(0,n.jsx)(C.p,{type:"password",value:P.password||"",onChange:e=>Z("password",e.target.value),placeholder:"Proxy password"})]})]})]})]})]})]})]}),F.length>0&&(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)(l.$,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsxs)(l.$,{type:"submit",disabled:!O.isValid()||f,isLoading:f,children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),f?"Saving...":"Save Provider"]})})}),(!O.isValid()||f)&&(0,n.jsx)(K.ZI,{children:(0,n.jsx)("p",{children:f?"Saving...":O.getFirstError()||"Please fix validation errors"})})]})})]})]})]})})}function eu(e){let{providers:s,onRefresh:t}=e,[r,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),h=async e=>{m(e);let[,s]=await p.K.deleteProvider(e);m(null),s?x.o.error(s):(x.o.success("Provider deleted successfully"),t())},f=e=>{d(e),i(!0)};return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(ed,{provider:o,onSave:()=>{i(!1),d(null),t()},onCancel:()=>i(!1),existingProviders:s.map(e=>e.name)}),(0,n.jsxs)(j.aR,{className:"mb-4 px-0",children:[(0,n.jsxs)(j.ZB,{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:"AI Providers"}),(0,n.jsxs)(l.$,{onClick:()=>{d(null),i(!0)},children:[(0,n.jsx)(S.A,{className:"h-4 w-4"}),"Add Provider"]})]}),(0,n.jsx)(j.BT,{children:"Manage AI model providers, their API keys, and configuration settings."})]}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(k.XI,{children:[(0,n.jsx)(k.A0,{children:(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nd,{children:"Provider"}),(0,n.jsx)(k.nd,{children:"Concurrency"}),(0,n.jsx)(k.nd,{children:"Buffer Size"}),(0,n.jsx)(k.nd,{children:"Max Retries"}),(0,n.jsx)(k.nd,{children:"API Keys"}),(0,n.jsx)(k.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsxs)(k.BF,{children:[0===s.length&&(0,n.jsx)(k.Hj,{children:(0,n.jsx)(k.nA,{colSpan:5,className:"py-6 text-center",children:"No providers found."})}),s.map(e=>{var s,t,a,r;return(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(V.RY[e.name]||"bg-gray-400")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:V.oU[e.name]||e.name}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:e.name})]})]})}),(0,n.jsx)(k.nA,{children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)(c.E,{variant:"outline",children:(null==(s=e.concurrency_and_buffer_size)?void 0:s.concurrency)||1})})}),(0,n.jsx)(k.nA,{children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)(c.E,{variant:"outline",children:(null==(t=e.concurrency_and_buffer_size)?void 0:t.buffer_size)||10})})}),(0,n.jsx)(k.nA,{children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)(c.E,{variant:"outline",children:(null==(a=e.network_config)?void 0:a.max_retries)||0})})}),(0,n.jsx)(k.nA,{children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:"vertex"!==e.name&&"ollama"!==e.name?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.A,{className:"text-muted-foreground h-4 w-4"}),(0,n.jsxs)("span",{className:"text-sm",children:[(null==(r=e.keys)?void 0:r.length)||0," keys"]})]}):(0,n.jsx)("span",{className:"text-sm",children:"N/A"})})}),(0,n.jsx)(k.nA,{className:"text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,n.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>f(e),children:(0,n.jsx)(P.A,{className:"h-4 w-4"})}),(0,n.jsxs)(I,{children:[(0,n.jsx)(R,{asChild:!0,children:(0,n.jsx)(l.$,{variant:"outline",size:"sm",disabled:u===e.name,children:u===e.name?(0,n.jsx)(y.A,{className:"h-4 w-4 animate-spin"}):(0,n.jsx)(E.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(B,{children:[(0,n.jsxs)(D,{children:[(0,n.jsx)(Z,{children:"Delete Provider"}),(0,n.jsxs)(F,{children:["Are you sure you want to delete provider ",e.name,"? This action cannot be undone."]})]}),(0,n.jsxs)(L,{children:[(0,n.jsx)(O,{children:"Cancel"}),(0,n.jsx)(H,{onClick:()=>h(e.name),children:"Delete"})]})]})]})]})})]},e.name)})]})]})})]})}var em=t(968);function ex(e){let{className:s,...t}=e;return(0,n.jsx)(em.b,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}let eh={name:"",connection_type:"http",connection_string:"",stdio_config:{command:"",args:[],envs:[]},tools_to_skip:[],tools_to_execute:[]},ep=e=>{var s,t,r,i,c,o;let{client:d,open:u,onClose:m,onSaved:x}=e,[j,f]=(0,a.useState)(eh),[g,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(""),[A,k]=(0,a.useState)(""),[S,z]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),{toast:V}=h();(0,a.useEffect)(()=>{if(d){var e,s,t,n,a;f({name:d.name,connection_type:d.config.connection_type,connection_string:d.config.connection_string||"",stdio_config:{command:(null==(e=d.config.stdio_config)?void 0:e.command)||"",args:(null==(s=d.config.stdio_config)?void 0:s.args)||[],envs:(null==(t=d.config.stdio_config)?void 0:t.envs)||[]},tools_to_skip:d.config.tools_to_skip||[],tools_to_execute:d.config.tools_to_execute||[]}),N(((null==(n=d.config.stdio_config)?void 0:n.args)||[]).join(", ")),k(((null==(a=d.config.stdio_config)?void 0:a.envs)||[]).join(", ")),z((d.config.tools_to_skip||[]).join(", ")),E((d.config.tools_to_execute||[]).join(", "))}else f(eh),N(""),k(""),z(""),E("")},[d]);let T=(e,s)=>{f(t=>({...t,[e]:s}))},I=(e,s)=>{f(t=>({...t,stdio_config:{...t.stdio_config,[e]:s}}))},R=e=>e.split(",").map(e=>e.trim()).filter(e=>e.length>0),M=new ea([ea.required(null==(s=j.name)?void 0:s.trim(),"Client name is required"),ea.pattern(j.name||"",/^[a-zA-Z0-9-_]+$/,"Client name can only contain letters, numbers, hyphens and underscores"),ea.minLength(j.name||"",3,"Client name must be at least 3 characters"),ea.maxLength(j.name||"",50,"Client name cannot exceed 50 characters"),..."http"===j.connection_type||"sse"===j.connection_type?[ea.required(null==(t=j.connection_string)?void 0:t.trim(),"Connection URL is required"),ea.pattern(j.connection_string||"",/^(http:\/\/|https:\/\/|env\.[A-Z_]+$)/,"Connection URL must start with http://, https://, or be an environment variable (env.VAR_NAME)")]:[],..."stdio"===j.connection_type?[ea.required(null==(i=j.stdio_config)||null==(r=i.command)?void 0:r.trim(),"Command is required for STDIO connections"),...!d?[ea.pattern((null==(c=j.stdio_config)?void 0:c.command)||"",/^[^<>|&;]+$/,"Command cannot contain special shell characters")]:[]]:[],...P.trim()?[ea.pattern(P,/^[a-zA-Z0-9_,-\s]+$/,"Tools to execute can only contain letters, numbers, underscores, and commas")]:[],...S.trim()?[ea.pattern(S,/^[a-zA-Z0-9_,-\s]+$/,"Tools to skip can only contain letters, numbers, underscores, and commas")]:[],ea.custom(!((e,s)=>{let t=new Set(R(e)),n=new Set(R(s));return Array.from(t).some(e=>n.has(e))})(P,S),"Tools cannot appear in both execute and skip lists")]),q=async()=>{v(!0);let e=null,s={...j,stdio_config:"stdio"===j.connection_type?{...j.stdio_config,args:R(y),envs:R(A)}:void 0,tools_to_skip:R(S),tools_to_execute:R(P)};if(d){let t={tools_to_execute:s.tools_to_execute,tools_to_skip:s.tools_to_skip};[,e]=await p.K.updateMCPClient(d.name,t)}else[,e]=await p.K.createMCPClient(s);v(!1),e?V({title:"Error",description:e,variant:"destructive"}):(V({title:"Success",description:d?"Client updated":"Client created"}),x(),m())};return(0,n.jsx)($.lG,{open:u,onOpenChange:m,children:(0,n.jsxs)($.Cf,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[(0,n.jsx)($.c7,{children:(0,n.jsx)($.L3,{children:d?"Edit MCP Client Tools":"New MCP Client"})}),(0,n.jsxs)(_.Fc,{children:[(0,n.jsx)(b.A,{className:"h-4 w-4"}),(0,n.jsxs)(_.TN,{children:[(0,n.jsx)("strong",{children:"Performance Notice:"})," This operation may temporarily increase latency for incoming requests while being processed."]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Name"}),(0,n.jsx)(C.p,{value:j.name,onChange:e=>T("name",e.target.value),placeholder:"Client name",disabled:!!d})]}),!d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full space-y-2",children:[(0,n.jsx)(ex,{children:"Connection Type"}),(0,n.jsxs)(U.l6,{value:j.connection_type,onValueChange:e=>T("connection_type",e),children:[(0,n.jsx)(U.bq,{className:"w-full",children:(0,n.jsx)(U.yv,{placeholder:"Select connection type"})}),(0,n.jsxs)(U.gC,{children:[(0,n.jsx)(U.eb,{value:"http",children:"HTTP (Streamable)"}),(0,n.jsx)(U.eb,{value:"sse",children:"Server-Sent Events (SSE)"}),(0,n.jsx)(U.eb,{value:"stdio",children:"STDIO"})]})]})]}),("http"===j.connection_type||"sse"===j.connection_type)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex w-fit items-center gap-1",children:[(0,n.jsx)(ex,{children:"Connection URL"}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(W.A,{className:"text-muted-foreground ml-1 h-3 w-3"})})}),(0,n.jsx)(K.ZI,{className:"max-w-fit",children:(0,n.jsxs)("p",{children:["Use ",(0,n.jsx)("code",{className:"rounded bg-neutral-100 px-1 py-0.5 text-neutral-800",children:"env.<VAR>"})," to read the value from an environment variable."]})})]})})]}),(0,n.jsx)(C.p,{value:j.connection_string||"",onChange:e=>T("connection_string",e.target.value),placeholder:"http://your-mcp-server:3000 or env.MCP_SERVER_URL"})]}),"stdio"===j.connection_type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Command"}),(0,n.jsx)(C.p,{value:(null==(o=j.stdio_config)?void 0:o.command)||"",onChange:e=>I("command",e.target.value),placeholder:"node, python, /path/to/executable"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Arguments (comma-separated)"}),(0,n.jsx)(C.p,{value:y,onChange:e=>N(e.target.value),placeholder:"--port, 3000, --config, config.json"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Environment Variables (comma-separated)"}),(0,n.jsx)(C.p,{value:A,onChange:e=>k(e.target.value),placeholder:"API_KEY, DATABASE_URL"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Tools to Execute (comma-separated, leave empty for all)"}),(0,n.jsx)(w,{value:P,onChange:e=>E(e.target.value),placeholder:"tool1, tool2, tool3",rows:2})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ex,{children:"Tools to Skip (comma-separated)"}),(0,n.jsx)(w,{value:S,onChange:e=>z(e.target.value),placeholder:"skipTool1, skipTool2",rows:2})]})]}),(0,n.jsxs)($.Es,{children:[(0,n.jsx)(l.$,{variant:"outline",onClick:m,disabled:g,children:"Cancel"}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsx)("span",{children:(0,n.jsx)(l.$,{onClick:q,disabled:!M.isValid()||g,isLoading:g,children:d?"Save":"Create"})})}),(!M.isValid()||g)&&(0,n.jsx)(K.ZI,{children:(0,n.jsx)("p",{children:g?"Saving...":M.getFirstError()||"Please fix validation errors"})})]})})]})]})})};var ej=t(4109),ef=t(9917);function eg(){let[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),{toast:d}=h(),u=async()=>{let[e,t]=await p.K.getMCPClients();t?d({title:"Error",description:t,variant:"destructive"}):s(e||[])};(0,a.useEffect)(()=>{u()},[]);let m=e=>{r(e),o(!0)},x=async e=>{let[,s]=await p.K.reconnectMCPClient(e.name);s?d({title:"Error",description:s,variant:"destructive"}):(d({title:"Reconnected",description:"Client reconnected."}),u())},f=async e=>{let[,s]=await p.K.deleteMCPClient(e.name);s?d({title:"Error",description:s,variant:"destructive"}):(d({title:"Deleted",description:"Client removed."}),u())},g=e=>{if("stdio"===e.config.connection_type){var s,t;return(null==(s=e.config.stdio_config)?void 0:s.command)+" "+(null==(t=e.config.stdio_config)?void 0:t.args.join(" "))||"STDIO"}return e.config.connection_string||"".concat(e.config.connection_type.toUpperCase())},v=e=>{switch(e){case"http":return"HTTP";case"sse":return"SSE";case"stdio":return"STDIO";default:return e.toUpperCase()}};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)(j.aR,{className:"mb-4 px-0",children:[(0,n.jsxs)(j.ZB,{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:"Registered Clients"}),(0,n.jsxs)(l.$,{onClick:()=>{r(null),o(!0)},children:[(0,n.jsx)(S.A,{className:"h-4 w-4"})," New Client"]})]}),(0,n.jsx)(j.BT,{children:"Manage clients that can connect to the MCP Tools endpoint."})]}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(k.XI,{children:[(0,n.jsx)(k.A0,{children:(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nd,{children:"Name"}),(0,n.jsx)(k.nd,{children:"Connection Type"}),(0,n.jsx)(k.nd,{children:"Connection Info"}),(0,n.jsx)(k.nd,{children:"State"}),(0,n.jsx)(k.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsxs)(k.BF,{children:[0===e.length&&(0,n.jsx)(k.Hj,{children:(0,n.jsx)(k.nA,{colSpan:5,className:"py-6 text-center",children:"No clients found."})}),e.map(e=>(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{className:"font-medium",children:e.name}),(0,n.jsx)(k.nA,{children:v(e.config.connection_type)}),(0,n.jsx)(k.nA,{className:"max-w-72 overflow-hidden text-ellipsis whitespace-nowrap",children:g(e)}),(0,n.jsx)(k.nA,{children:(0,n.jsx)(c.E,{className:ec[e.state],children:e.state})}),(0,n.jsxs)(k.nA,{className:"space-x-2 text-right",children:["disconnected"===e.state?(0,n.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>x(e),children:(0,n.jsx)(ej.A,{className:"h-4 w-4"})}):"connected"===e.state&&(0,n.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>m(e),children:(0,n.jsx)(ef.A,{className:"h-4 w-4"})}),(0,n.jsxs)(I,{children:[(0,n.jsx)(R,{asChild:!0,children:(0,n.jsx)(l.$,{variant:"ghost",size:"icon",disabled:"error"===e.state,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(B,{children:[(0,n.jsxs)(D,{children:[(0,n.jsx)(Z,{children:"Remove MCP Client"}),(0,n.jsxs)(F,{children:["Are you sure you want to remove MCP client ",e.name,"? You will need to reconnect the client to continue using it."]})]}),(0,n.jsxs)(L,{children:[(0,n.jsx)(O,{children:"Cancel"}),(0,n.jsx)(H,{onClick:()=>f(e),children:"Delete"})]})]})]})]})]},e.name))]})]})}),i&&(0,n.jsx)(ep,{open:i,client:t,onClose:()=>o(!1),onSaved:()=>{o(!1),u()}})]})}var ev=t(2384);function ey(){let[e,s]=(0,a.useState)("providers"),[t,x]=(0,a.useState)(!0),[j,f]=(0,a.useState)(!0),[g,v]=(0,a.useState)([]),[y,b]=(0,a.useState)([]),{toast:N}=h();(0,a.useEffect)(()=>{_(),C()},[]);let _=async()=>{let[e,s]=await p.K.getProviders();if(x(!1),s)return void N({title:"Error",description:s,variant:"destructive"});v((null==e?void 0:e.providers)||[])},C=async()=>{let[e,s]=await p.K.getMCPClients();if(f(!1),s)return void N({title:"Error",description:s,variant:"destructive"});b(e||[])},w=async()=>{let[,e]=await p.K.saveConfig();e?N({title:"Error",description:e,variant:"destructive"}):N({title:"Success",description:"Configuration saved successfully"})};return(0,n.jsxs)("div",{className:"bg-background",children:[(0,n.jsx)(r.A,{title:"Configuration"}),t||j?(0,n.jsx)(ev.A,{}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Configuration"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Configure AI providers, API keys, and system settings for your Bifrost instance."})]}),(0,n.jsx)(K.Bc,{children:(0,n.jsxs)(K.m_,{children:[(0,n.jsx)(K.k$,{asChild:!0,children:(0,n.jsxs)(l.$,{onClick:w,variant:"outline",disabled:t||j,children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),"Save Config"]})}),(0,n.jsx)(K.ZI,{children:"Persist configuration for next server start."})]})})]}),(0,n.jsxs)(i.Tabs,{value:e,onValueChange:s,className:"space-y-6",children:[(0,n.jsxs)(i.TabsList,{className:"grid h-12 w-full grid-cols-3",children:[(0,n.jsxs)(i.TabsTrigger,{value:"providers",className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{className:"h-4 w-4"}),"Providers",(0,n.jsx)(c.E,{variant:"default",className:"ml-1",children:g.length})]}),(0,n.jsxs)(i.TabsTrigger,{value:"mcp",className:"flex items-center gap-2",children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),"MCP Clients",y.length>0&&(0,n.jsx)(c.E,{variant:"default",className:"ml-1",children:y.length})]}),(0,n.jsxs)(i.TabsTrigger,{value:"core",className:"flex items-center gap-2",children:[(0,n.jsx)(m.A,{className:"h-4 w-4"}),"Core Settings"]})]}),(0,n.jsx)(i.TabsContent,{value:"providers",className:"space-y-4",children:(0,n.jsx)(eu,{providers:g,onRefresh:_})}),(0,n.jsx)(i.TabsContent,{value:"mcp",className:"space-y-4",children:(0,n.jsx)(eg,{})}),(0,n.jsx)(i.TabsContent,{value:"core",className:"space-y-4",children:(0,n.jsx)(A,{})})]})]})]})}},4432:(e,s,t)=>{"use strict";t.d(s,{F:()=>u});var n=t(5155),a=t(4213),r=t(381),i=t(5487),l=t(5448),c=t(9803),o=t(4869),d=t(1154);let u={bifrost:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 259 247",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M126.157 20V67.2283L82.9686 182.152H20.0019L126.157 20Z",fill:"#D9D9D9"}),(0,n.jsx)("path",{d:"M126.157 20V67.2283L82.9686 182.152H20.0019L126.157 20Z",fill:"url(#paint0_linear_2477_3310)"}),(0,n.jsx)("path",{d:"M132.844 20V67.2283L176.033 182.152H239L132.844 20Z",fill:"#D9D9D9"}),(0,n.jsx)("path",{d:"M132.844 20V67.2283L176.033 182.152H239L132.844 20Z",fill:"url(#paint1_linear_2477_3310)"}),(0,n.jsx)("path",{d:"M20 191.963H82.6903V227H20V191.963Z",fill:"#D9D9D9"}),(0,n.jsx)("path",{d:"M20 191.963H82.6903V227H20V191.963Z",fill:"url(#paint2_linear_2477_3310)"}),(0,n.jsx)("path",{d:"M176.308 191.963H238.998V227H176.308V191.963Z",fill:"#D9D9D9"}),(0,n.jsx)("path",{d:"M176.308 191.963H238.998V227H176.308V191.963Z",fill:"url(#paint3_linear_2477_3310)"}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:"paint0_linear_2477_3310",x1:"172.144",y1:"-22.4614",x2:"341.129",y2:"153.483",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#A3FFDC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#66E0B2"})]}),(0,n.jsxs)("linearGradient",{id:"paint1_linear_2477_3310",x1:"172.144",y1:"-22.4614",x2:"341.129",y2:"153.483",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#A3FFDC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#66E0B2"})]}),(0,n.jsxs)("linearGradient",{id:"paint2_linear_2477_3310",x1:"172.144",y1:"-22.4614",x2:"341.129",y2:"153.483",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#A3FFDC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#66E0B2"})]}),(0,n.jsxs)("linearGradient",{id:"paint3_linear_2477_3310",x1:"172.144",y1:"-22.4614",x2:"341.129",y2:"153.483",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#A3FFDC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#66E0B2"})]})]})]}),openai:(0,n.jsx)(a.A,{}),anthropic:(0,n.jsx)(r.A,{}),bedrock:(0,n.jsx)(i.A,{}),cohere:(0,n.jsx)(l.A,{}),vertex:(0,n.jsx)(c.A,{}),ollama:(0,n.jsx)(o.A,{}),mistral:(0,n.jsxs)("svg",{height:"1em",style:{flex:"none",lineHeight:"1"},viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:"Mistral"}),(0,n.jsx)("path",{d:"M3.428 3.4h3.429v3.428H3.428V3.4zm13.714 0h3.43v3.428h-3.43V3.4z",fill:"gold"}),(0,n.jsx)("path",{d:"M3.428 6.828h6.857v3.429H3.429V6.828zm10.286 0h6.857v3.429h-6.857V6.828z",fill:"#FFAF00"}),(0,n.jsx)("path",{d:"M3.428 10.258h17.144v3.428H3.428v-3.428z",fill:"#FF8205"}),(0,n.jsx)("path",{d:"M3.428 13.686h3.429v3.428H3.428v-3.428zm6.858 0h3.429v3.428h-3.429v-3.428zm6.856 0h3.43v3.428h-3.43v-3.428z",fill:"#FA500F"}),(0,n.jsx)("path",{d:"M0 17.114h10.286v3.429H0v-3.429zm13.714 0H24v3.429H13.714v-3.429z",fill:"#E10500"})]}),azure:(0,n.jsx)(d.A,{})}},7777:(e,s,t)=>{"use strict";t.d(s,{Bc:()=>i,ZI:()=>o,k$:()=>c,m_:()=>l});var n=t(5155);t(2115);var a=t(9613),r=t(3999);function i(e){let{delayDuration:s=0,...t}=e;return(0,n.jsx)(a.Kq,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function l(e){let{...s}=e;return(0,n.jsx)(i,{children:(0,n.jsx)(a.bL,{"data-slot":"tooltip",...s})})}function c(e){let{...s}=e;return(0,n.jsx)(a.l9,{"data-slot":"tooltip-trigger",...s})}function o(e){let{className:s,sideOffset:t=0,children:i,...l}=e;return(0,n.jsx)(a.ZL,{children:(0,n.jsxs)(a.UC,{"data-slot":"tooltip-content",sideOffset:t,className:(0,r.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...l,children:[i,(0,n.jsx)(a.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},8835:(e,s,t)=>{Promise.resolve().then(t.bind(t,1059))}},e=>{var s=s=>e(e.s=s);e.O(0,[867,519,213,866,473,293,341,441,684,358],()=>s(8835)),_N_E=e.O()}]);